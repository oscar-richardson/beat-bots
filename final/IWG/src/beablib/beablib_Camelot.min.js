/* beablib_Camelot 2020_07_13__7-21-41 version: v20200713*/
var BL_timestamp="beablib_Camelot 2020_07_13__7-21-41";

!function(){"use strict";var t,e=[];function i(){for(;e.length;)e[0](),e.shift()}function n(t){this.a=a,this.b=void 0,this.f=[];var e=this;try{t(function(t){!function t(e,i){if(e.a==a){if(i==e)throw new TypeError;var n=!1;try{var r=i&&i.then;if(null!=i&&"object"==typeof i&&"function"==typeof r)return void r.call(i,function(i){n||t(e,i),n=!0},function(t){n||o(e,t),n=!0})}catch(t){return void(n||o(e,t))}e.a=0,e.b=i,s(e)}}(e,t)},function(t){o(e,t)})}catch(t){o(e,t)}}t=function(){setTimeout(i)};var a=2;function r(t){return new n(function(e){e(t)})}function o(t,e){if(t.a==a){if(e==t)throw new TypeError;t.a=1,t.b=e,s(t)}}function s(i){!function(i){e.push(i),1==e.length&&t()}(function(){if(i.a!=a)for(;i.f.length;){var t=(r=i.f.shift())[0],e=r[1],n=r[2],r=r[3];try{0==i.a?n("function"==typeof t?t.call(void 0,i.b):i.b):1==i.a&&("function"==typeof e?n(e.call(void 0,i.b)):r(i.b))}catch(t){r(t)}}})}n.prototype.g=function(t){return this.c(void 0,t)},n.prototype.c=function(t,e){var i=this;return new n(function(n,a){i.f.push([t,e,n,a]),s(i)})},window.Promise||(window.Promise=n,window.Promise.resolve=r,window.Promise.reject=function(t){return new n(function(e,i){i(t)})},window.Promise.race=function(t){return new n(function(e,i){for(var n=0;n<t.length;n+=1)r(t[n]).c(e,i)})},window.Promise.all=function(t){return new n(function(e,i){function n(i){return function(n){o[i]=n,(a+=1)==t.length&&e(o)}}var a=0,o=[];0==t.length&&e(o);for(var s=0;s<t.length;s+=1)r(t[s]).c(n(s),i)})},window.Promise.prototype.then=n.prototype.c,window.Promise.prototype.catch=n.prototype.g)}(),function(){function t(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function e(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function n(t){var e=t.a.offsetWidth,i=e+100;return t.f.style.width=i+"px",t.c.scrollLeft=i,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function a(e,i){function a(){var t=r;n(t)&&t.a.parentNode&&i(t.g)}var r=e;t(e.b,a),t(e.c,a),n(e)}function r(t,e){var i=e||{};this.family=t,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var o=null,s=null,u=null,l=null;function c(){return null===l&&(l=!!document.fonts),l}function h(t,e){return[t.style,t.weight,function(){if(null===u){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}u=""!==t.style.font}return u}()?t.stretch:"","100px",e].join(" ")}r.prototype.load=function(t,n){var r=this,u=t||"BESbswy",l=0,b=n||3e3,d=(new Date).getTime();return new Promise(function(t,n){if(c()&&!function(){if(null===s)if(c()&&/Apple/.test(window.navigator.vendor)){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);s=!!t&&603>parseInt(t[1],10)}else s=!1;return s}()){var f=new Promise(function(t,e){!function i(){(new Date).getTime()-d>=b?e(Error(b+"ms timeout exceeded")):document.fonts.load(h(r,'"'+r.family+'"'),u).then(function(e){1<=e.length?t():setTimeout(i,25)},e)}()}),p=new Promise(function(t,e){l=setTimeout(function(){e(Error(b+"ms timeout exceeded"))},b)});Promise.race([p,f]).then(function(){clearTimeout(l),t(r)},n)}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())})}(function(){function s(){var e;(e=-1!=m&&-1!=v||-1!=m&&-1!=w||-1!=v&&-1!=w)&&((e=m!=v&&m!=w&&v!=w)||(null===o&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=o&&(m==g&&v==g&&w==g||m==M&&v==M&&w==M||m==S&&v==S&&w==S)),e=!e),e&&(y.parentNode&&y.parentNode.removeChild(y),clearTimeout(l),t(r))}var c=new e(u),f=new e(u),p=new e(u),m=-1,v=-1,w=-1,g=-1,M=-1,S=-1,y=document.createElement("div");y.dir="ltr",i(c,h(r,"sans-serif")),i(f,h(r,"serif")),i(p,h(r,"monospace")),y.appendChild(c.a),y.appendChild(f.a),y.appendChild(p.a),document.body.appendChild(y),g=c.a.offsetWidth,M=f.a.offsetWidth,S=p.a.offsetWidth,function t(){if((new Date).getTime()-d>=b)y.parentNode&&y.parentNode.removeChild(y),n(Error(b+"ms timeout exceeded"));else{var e=document.hidden;!0!==e&&void 0!==e||(m=c.a.offsetWidth,v=f.a.offsetWidth,w=p.a.offsetWidth,s()),l=setTimeout(t,50)}}(),a(c,function(t){m=t,s()}),i(c,h(r,'"'+r.family+'",sans-serif')),a(f,function(t){v=t,s()}),i(f,h(r,'"'+r.family+'",serif')),a(p,function(t){w=t,s()}),i(p,h(r,'"'+r.family+'",monospace'))})})},"object"==typeof module?module.exports=r:(window.FontFaceObserver=r,window.FontFaceObserver.prototype.load=r.prototype.load)}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).glMatrix={})}(this,function(t){"use strict";var e="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random,n=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var a=Object.freeze({__proto__:null,EPSILON:1e-6,get ARRAY_TYPE(){return e},RANDOM:i,setMatrixArrayType:function(t){e=t},toRadian:function(t){return t*n},equals:function(t,e){return Math.abs(t-e)<=1e-6*Math.max(1,Math.abs(t),Math.abs(e))}});function r(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=i[0],u=i[1],l=i[2],c=i[3];return t[0]=n*s+r*u,t[1]=a*s+o*u,t[2]=n*l+r*c,t[3]=a*l+o*c,t}function o(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}var s=r,u=o,l=Object.freeze({__proto__:null,create:function(){var t=new e(4);return e!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone:function(t){var i=new e(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,i,n,a){var r=new e(4);return r[0]=t,r[1]=i,r[2]=n,r[3]=a,r},set:function(t,e,i,n,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=a,t},transpose:function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=i*r-a*n;return o?(o=1/o,t[0]=r*o,t[1]=-n*o,t[2]=-a*o,t[3]=i*o,t):null},adjoint:function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:r,rotate:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=Math.sin(i),u=Math.cos(i);return t[0]=n*u+r*s,t[1]=a*u+o*s,t[2]=n*-s+r*u,t[3]=a*-s+o*u,t},scale:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=i[0],u=i[1];return t[0]=n*s,t[1]=a*s,t[2]=r*u,t[3]=o*u,t},fromRotation:function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,e,i,n){return t[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-t[2]*i[1],[t,e,i]},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},subtract:o,exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals:function(t,e){var i=t[0],n=t[1],a=t[2],r=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(i-o)<=1e-6*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-l)<=1e-6*Math.max(1,Math.abs(r),Math.abs(l))},multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},multiplyScalarAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},mul:s,sub:u});function c(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=i[0],c=i[1],h=i[2],b=i[3],d=i[4],f=i[5];return t[0]=n*l+r*c,t[1]=a*l+o*c,t[2]=n*h+r*b,t[3]=a*h+o*b,t[4]=n*d+r*f+s,t[5]=a*d+o*f+u,t}function h(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}var b=c,d=h,f=Object.freeze({__proto__:null,create:function(){var t=new e(6);return e!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone:function(t){var i=new e(6);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,i,n,a,r,o){var s=new e(6);return s[0]=t,s[1]=i,s[2]=n,s[3]=a,s[4]=r,s[5]=o,s},set:function(t,e,i,n,a,r,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=a,t[4]=r,t[5]=o,t},invert:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],u=i*r-n*a;return u?(u=1/u,t[0]=r*u,t[1]=-n*u,t[2]=-a*u,t[3]=i*u,t[4]=(a*s-r*o)*u,t[5]=(n*o-i*s)*u,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:c,rotate:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c+r*l,t[1]=a*c+o*l,t[2]=n*-l+r*c,t[3]=a*-l+o*c,t[4]=s,t[5]=u,t},scale:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=i[0],c=i[1];return t[0]=n*l,t[1]=a*l,t[2]=r*c,t[3]=o*c,t[4]=s,t[5]=u,t},translate:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=i[0],c=i[1];return t[0]=n,t[1]=a,t[2]=r,t[3]=o,t[4]=n*l+r*c+s,t[5]=a*l+o*c+u,t},fromRotation:function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t},subtract:h,multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t},multiplyScalarAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals:function(t,e){var i=t[0],n=t[1],a=t[2],r=t[3],o=t[4],s=t[5],u=e[0],l=e[1],c=e[2],h=e[3],b=e[4],d=e[5];return Math.abs(i-u)<=1e-6*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(n-l)<=1e-6*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=1e-6*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(r-h)<=1e-6*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-b)<=1e-6*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-d)<=1e-6*Math.max(1,Math.abs(s),Math.abs(d))},mul:b,sub:d});function p(){var t=new e(9);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function m(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],b=i[0],d=i[1],f=i[2],p=i[3],m=i[4],v=i[5],w=i[6],g=i[7],M=i[8];return t[0]=b*n+d*o+f*l,t[1]=b*a+d*s+f*c,t[2]=b*r+d*u+f*h,t[3]=p*n+m*o+v*l,t[4]=p*a+m*s+v*c,t[5]=p*r+m*u+v*h,t[6]=w*n+g*o+M*l,t[7]=w*a+g*s+M*c,t[8]=w*r+g*u+M*h,t}function v(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}var w=m,g=v,M=Object.freeze({__proto__:null,create:p,fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var i=new e(9);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,i,n,a,r,o,s,u,l){var c=new e(9);return c[0]=t,c[1]=i,c[2]=n,c[3]=a,c[4]=r,c[5]=o,c[6]=s,c[7]=u,c[8]=l,c},set:function(t,e,i,n,a,r,o,s,u,l){return t[0]=e,t[1]=i,t[2]=n,t[3]=a,t[4]=r,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var i=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*o-s*l,b=-c*r+s*u,d=l*r-o*u,f=i*h+n*b+a*d;return f?(f=1/f,t[0]=h*f,t[1]=(-c*n+a*l)*f,t[2]=(s*n-a*o)*f,t[3]=b*f,t[4]=(c*i-a*u)*f,t[5]=(-s*i+a*r)*f,t[6]=d*f,t[7]=(-l*i+n*u)*f,t[8]=(o*i-n*r)*f,t):null},adjoint:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=o*c-s*l,t[1]=a*l-n*c,t[2]=n*s-a*o,t[3]=s*u-r*c,t[4]=i*c-a*u,t[5]=a*r-i*s,t[6]=r*l-o*u,t[7]=n*u-i*l,t[8]=i*o-n*r,t},determinant:function(t){var e=t[0],i=t[1],n=t[2],a=t[3],r=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*(l*r-o*u)+i*(-l*a+o*s)+n*(u*a-r*s)},multiply:m,translate:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],b=i[0],d=i[1];return t[0]=n,t[1]=a,t[2]=r,t[3]=o,t[4]=s,t[5]=u,t[6]=b*n+d*o+l,t[7]=b*a+d*s+c,t[8]=b*r+d*u+h,t},rotate:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],b=Math.sin(i),d=Math.cos(i);return t[0]=d*n+b*o,t[1]=d*a+b*s,t[2]=d*r+b*u,t[3]=d*o-b*n,t[4]=d*s-b*a,t[5]=d*u-b*r,t[6]=l,t[7]=c,t[8]=h,t},scale:function(t,e,i){var n=i[0],a=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=i+i,s=n+n,u=a+a,l=i*o,c=n*o,h=n*s,b=a*o,d=a*s,f=a*u,p=r*o,m=r*s,v=r*u;return t[0]=1-h-f,t[3]=c-v,t[6]=b+m,t[1]=c+v,t[4]=1-l-f,t[7]=d-p,t[2]=b-m,t[5]=d+p,t[8]=1-l-h,t},normalFromMat4:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],b=e[10],d=e[11],f=e[12],p=e[13],m=e[14],v=e[15],w=i*s-n*o,g=i*u-a*o,M=i*l-r*o,S=n*u-a*s,y=n*l-r*s,P=a*l-r*u,x=c*p-h*f,I=c*m-b*f,C=c*v-d*f,A=h*m-b*p,T=h*v-d*p,E=b*v-d*m,D=w*E-g*T+M*A+S*C-y*I+P*x;return D?(D=1/D,t[0]=(s*E-u*T+l*A)*D,t[1]=(u*C-o*E-l*I)*D,t[2]=(o*T-s*C+l*x)*D,t[3]=(a*T-n*E-r*A)*D,t[4]=(i*E-a*C+r*I)*D,t[5]=(n*C-i*T-r*x)*D,t[6]=(p*P-m*y+v*S)*D,t[7]=(m*M-f*P-v*g)*D,t[8]=(f*y-p*M+v*w)*D,t):null},projection:function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},subtract:v,multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},multiplyScalarAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){var i=t[0],n=t[1],a=t[2],r=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=e[0],b=e[1],d=e[2],f=e[3],p=e[4],m=e[5],v=e[6],w=e[7],g=e[8];return Math.abs(i-h)<=1e-6*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-b)<=1e-6*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-d)<=1e-6*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(r-f)<=1e-6*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-p)<=1e-6*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=1e-6*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=1e-6*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-w)<=1e-6*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-g)<=1e-6*Math.max(1,Math.abs(c),Math.abs(g))},mul:w,sub:g});function S(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],b=e[9],d=e[10],f=e[11],p=e[12],m=e[13],v=e[14],w=e[15],g=i[0],M=i[1],S=i[2],y=i[3];return t[0]=g*n+M*s+S*h+y*p,t[1]=g*a+M*u+S*b+y*m,t[2]=g*r+M*l+S*d+y*v,t[3]=g*o+M*c+S*f+y*w,g=i[4],M=i[5],S=i[6],y=i[7],t[4]=g*n+M*s+S*h+y*p,t[5]=g*a+M*u+S*b+y*m,t[6]=g*r+M*l+S*d+y*v,t[7]=g*o+M*c+S*f+y*w,g=i[8],M=i[9],S=i[10],y=i[11],t[8]=g*n+M*s+S*h+y*p,t[9]=g*a+M*u+S*b+y*m,t[10]=g*r+M*l+S*d+y*v,t[11]=g*o+M*c+S*f+y*w,g=i[12],M=i[13],S=i[14],y=i[15],t[12]=g*n+M*s+S*h+y*p,t[13]=g*a+M*u+S*b+y*m,t[14]=g*r+M*l+S*d+y*v,t[15]=g*o+M*c+S*f+y*w,t}function P(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=n+n,u=a+a,l=r+r,c=n*s,h=n*u,b=n*l,d=a*u,f=a*l,p=r*l,m=o*s,v=o*u,w=o*l;return t[0]=1-(d+p),t[1]=h+w,t[2]=b-v,t[3]=0,t[4]=h-w,t[5]=1-(c+p),t[6]=f+m,t[7]=0,t[8]=b+v,t[9]=f-m,t[10]=1-(c+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function x(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function I(t,e){var i=e[0],n=e[1],a=e[2],r=e[4],o=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(i,n,a),t[1]=Math.hypot(r,o,s),t[2]=Math.hypot(u,l,c),t}function C(t,i){var n=new e(3);I(n,i);var a=1/n[0],r=1/n[1],o=1/n[2],s=i[0]*a,u=i[1]*r,l=i[2]*o,c=i[4]*a,h=i[5]*r,b=i[6]*o,d=i[8]*a,f=i[9]*r,p=i[10]*o,m=s+h+p,v=0;return m>0?(v=2*Math.sqrt(m+1),t[3]=.25*v,t[0]=(b-f)/v,t[1]=(d-l)/v,t[2]=(u-c)/v):s>h&&s>p?(v=2*Math.sqrt(1+s-h-p),t[3]=(b-f)/v,t[0]=.25*v,t[1]=(u+c)/v,t[2]=(d+l)/v):h>p?(v=2*Math.sqrt(1+h-s-p),t[3]=(d-l)/v,t[0]=(u+c)/v,t[1]=.25*v,t[2]=(b+f)/v):(v=2*Math.sqrt(1+p-s-h),t[3]=(u-c)/v,t[0]=(d+l)/v,t[1]=(b+f)/v,t[2]=.25*v),t}function A(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}var T=y,E=A,D=Object.freeze({__proto__:null,create:function(){var t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var i=new e(16);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(t,i,n,a,r,o,s,u,l,c,h,b,d,f,p,m){var v=new e(16);return v[0]=t,v[1]=i,v[2]=n,v[3]=a,v[4]=r,v[5]=o,v[6]=s,v[7]=u,v[8]=l,v[9]=c,v[10]=h,v[11]=b,v[12]=d,v[13]=f,v[14]=p,v[15]=m,v},set:function(t,e,i,n,a,r,o,s,u,l,c,h,b,d,f,p,m){return t[0]=e,t[1]=i,t[2]=n,t[3]=a,t[4]=r,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=b,t[12]=d,t[13]=f,t[14]=p,t[15]=m,t},identity:S,transpose:function(t,e){if(t===e){var i=e[1],n=e[2],a=e[3],r=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=r,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},invert:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],b=e[10],d=e[11],f=e[12],p=e[13],m=e[14],v=e[15],w=i*s-n*o,g=i*u-a*o,M=i*l-r*o,S=n*u-a*s,y=n*l-r*s,P=a*l-r*u,x=c*p-h*f,I=c*m-b*f,C=c*v-d*f,A=h*m-b*p,T=h*v-d*p,E=b*v-d*m,D=w*E-g*T+M*A+S*C-y*I+P*x;return D?(D=1/D,t[0]=(s*E-u*T+l*A)*D,t[1]=(a*T-n*E-r*A)*D,t[2]=(p*P-m*y+v*S)*D,t[3]=(b*y-h*P-d*S)*D,t[4]=(u*C-o*E-l*I)*D,t[5]=(i*E-a*C+r*I)*D,t[6]=(m*M-f*P-v*g)*D,t[7]=(c*P-b*M+d*g)*D,t[8]=(o*T-s*C+l*x)*D,t[9]=(n*C-i*T-r*x)*D,t[10]=(f*y-p*M+v*w)*D,t[11]=(h*M-c*y-d*w)*D,t[12]=(s*I-o*A-u*x)*D,t[13]=(i*A-n*I+a*x)*D,t[14]=(p*g-f*S-m*w)*D,t[15]=(c*S-h*g+b*w)*D,t):null},adjoint:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],b=e[10],d=e[11],f=e[12],p=e[13],m=e[14],v=e[15];return t[0]=s*(b*v-d*m)-h*(u*v-l*m)+p*(u*d-l*b),t[1]=-(n*(b*v-d*m)-h*(a*v-r*m)+p*(a*d-r*b)),t[2]=n*(u*v-l*m)-s*(a*v-r*m)+p*(a*l-r*u),t[3]=-(n*(u*d-l*b)-s*(a*d-r*b)+h*(a*l-r*u)),t[4]=-(o*(b*v-d*m)-c*(u*v-l*m)+f*(u*d-l*b)),t[5]=i*(b*v-d*m)-c*(a*v-r*m)+f*(a*d-r*b),t[6]=-(i*(u*v-l*m)-o*(a*v-r*m)+f*(a*l-r*u)),t[7]=i*(u*d-l*b)-o*(a*d-r*b)+c*(a*l-r*u),t[8]=o*(h*v-d*p)-c*(s*v-l*p)+f*(s*d-l*h),t[9]=-(i*(h*v-d*p)-c*(n*v-r*p)+f*(n*d-r*h)),t[10]=i*(s*v-l*p)-o*(n*v-r*p)+f*(n*l-r*s),t[11]=-(i*(s*d-l*h)-o*(n*d-r*h)+c*(n*l-r*s)),t[12]=-(o*(h*m-b*p)-c*(s*m-u*p)+f*(s*b-u*h)),t[13]=i*(h*m-b*p)-c*(n*m-a*p)+f*(n*b-a*h),t[14]=-(i*(s*m-u*p)-o*(n*m-a*p)+f*(n*u-a*s)),t[15]=i*(s*b-u*h)-o*(n*b-a*h)+c*(n*u-a*s),t},determinant:function(t){var e=t[0],i=t[1],n=t[2],a=t[3],r=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],b=t[11],d=t[12],f=t[13],p=t[14],m=t[15];return(e*o-i*r)*(h*m-b*p)-(e*s-n*r)*(c*m-b*f)+(e*u-a*r)*(c*p-h*f)+(i*s-n*o)*(l*m-b*d)-(i*u-a*o)*(l*p-h*d)+(n*u-a*s)*(l*f-c*d)},multiply:y,translate:function(t,e,i){var n,a,r,o,s,u,l,c,h,b,d,f,p=i[0],m=i[1],v=i[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*v+e[12],t[13]=e[1]*p+e[5]*m+e[9]*v+e[13],t[14]=e[2]*p+e[6]*m+e[10]*v+e[14],t[15]=e[3]*p+e[7]*m+e[11]*v+e[15]):(n=e[0],a=e[1],r=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],b=e[9],d=e[10],f=e[11],t[0]=n,t[1]=a,t[2]=r,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=b,t[10]=d,t[11]=f,t[12]=n*p+s*m+h*v+e[12],t[13]=a*p+u*m+b*v+e[13],t[14]=r*p+l*m+d*v+e[14],t[15]=o*p+c*m+f*v+e[15]),t},scale:function(t,e,i){var n=i[0],a=i[1],r=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate:function(t,e,i,n){var a,r,o,s,u,l,c,h,b,d,f,p,m,v,w,g,M,S,y,P,x,I,C,A,T=n[0],E=n[1],D=n[2],G=Math.hypot(T,E,D);return G<1e-6?null:(T*=G=1/G,E*=G,D*=G,a=Math.sin(i),o=1-(r=Math.cos(i)),s=e[0],u=e[1],l=e[2],c=e[3],h=e[4],b=e[5],d=e[6],f=e[7],p=e[8],m=e[9],v=e[10],w=e[11],g=T*T*o+r,M=E*T*o+D*a,S=D*T*o-E*a,y=T*E*o-D*a,P=E*E*o+r,x=D*E*o+T*a,I=T*D*o+E*a,C=E*D*o-T*a,A=D*D*o+r,t[0]=s*g+h*M+p*S,t[1]=u*g+b*M+m*S,t[2]=l*g+d*M+v*S,t[3]=c*g+f*M+w*S,t[4]=s*y+h*P+p*x,t[5]=u*y+b*P+m*x,t[6]=l*y+d*P+v*x,t[7]=c*y+f*P+w*x,t[8]=s*I+h*C+p*A,t[9]=u*I+b*C+m*A,t[10]=l*I+d*C+v*A,t[11]=c*I+f*C+w*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:function(t,e,i){var n=Math.sin(i),a=Math.cos(i),r=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],b=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*a+l*n,t[5]=o*a+c*n,t[6]=s*a+h*n,t[7]=u*a+b*n,t[8]=l*a-r*n,t[9]=c*a-o*n,t[10]=h*a-s*n,t[11]=b*a-u*n,t},rotateY:function(t,e,i){var n=Math.sin(i),a=Math.cos(i),r=e[0],o=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],b=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*a-l*n,t[1]=o*a-c*n,t[2]=s*a-h*n,t[3]=u*a-b*n,t[8]=r*n+l*a,t[9]=o*n+c*a,t[10]=s*n+h*a,t[11]=u*n+b*a,t},rotateZ:function(t,e,i){var n=Math.sin(i),a=Math.cos(i),r=e[0],o=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*a+l*n,t[1]=o*a+c*n,t[2]=s*a+h*n,t[3]=u*a+b*n,t[4]=l*a-r*n,t[5]=c*a-o*n,t[6]=h*a-s*n,t[7]=b*a-u*n,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,e,i){var n,a,r,o=i[0],s=i[1],u=i[2],l=Math.hypot(o,s,u);return l<1e-6?null:(o*=l=1/l,s*=l,u*=l,n=Math.sin(e),r=1-(a=Math.cos(e)),t[0]=o*o*r+a,t[1]=s*o*r+u*n,t[2]=u*o*r-s*n,t[3]=0,t[4]=o*s*r-u*n,t[5]=s*s*r+a,t[6]=u*s*r+o*n,t[7]=0,t[8]=o*u*r+s*n,t[9]=s*u*r-o*n,t[10]=u*u*r+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:P,fromQuat2:function(t,i){var n=new e(3),a=-i[0],r=-i[1],o=-i[2],s=i[3],u=i[4],l=i[5],c=i[6],h=i[7],b=a*a+r*r+o*o+s*s;return b>0?(n[0]=2*(u*s+h*a+l*o-c*r)/b,n[1]=2*(l*s+h*r+c*a-u*o)/b,n[2]=2*(c*s+h*o+u*r-l*a)/b):(n[0]=2*(u*s+h*a+l*o-c*r),n[1]=2*(l*s+h*r+c*a-u*o),n[2]=2*(c*s+h*o+u*r-l*a)),P(t,i,n),t},getTranslation:x,getScaling:I,getRotation:C,fromRotationTranslationScale:function(t,e,i,n){var a=e[0],r=e[1],o=e[2],s=e[3],u=a+a,l=r+r,c=o+o,h=a*u,b=a*l,d=a*c,f=r*l,p=r*c,m=o*c,v=s*u,w=s*l,g=s*c,M=n[0],S=n[1],y=n[2];return t[0]=(1-(f+m))*M,t[1]=(b+g)*M,t[2]=(d-w)*M,t[3]=0,t[4]=(b-g)*S,t[5]=(1-(h+m))*S,t[6]=(p+v)*S,t[7]=0,t[8]=(d+w)*y,t[9]=(p-v)*y,t[10]=(1-(h+f))*y,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,i,n,a){var r=e[0],o=e[1],s=e[2],u=e[3],l=r+r,c=o+o,h=s+s,b=r*l,d=r*c,f=r*h,p=o*c,m=o*h,v=s*h,w=u*l,g=u*c,M=u*h,S=n[0],y=n[1],P=n[2],x=a[0],I=a[1],C=a[2],A=(1-(p+v))*S,T=(d+M)*S,E=(f-g)*S,D=(d-M)*y,G=(1-(b+v))*y,X=(m+w)*y,k=(f+g)*P,B=(m-w)*P,R=(1-(b+p))*P;return t[0]=A,t[1]=T,t[2]=E,t[3]=0,t[4]=D,t[5]=G,t[6]=X,t[7]=0,t[8]=k,t[9]=B,t[10]=R,t[11]=0,t[12]=i[0]+x-(A*x+D*I+k*C),t[13]=i[1]+I-(T*x+G*I+B*C),t[14]=i[2]+C-(E*x+X*I+R*C),t[15]=1,t},fromQuat:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=i+i,s=n+n,u=a+a,l=i*o,c=n*o,h=n*s,b=a*o,d=a*s,f=a*u,p=r*o,m=r*s,v=r*u;return t[0]=1-h-f,t[1]=c+v,t[2]=b-m,t[3]=0,t[4]=c-v,t[5]=1-l-f,t[6]=d+p,t[7]=0,t[8]=b+m,t[9]=d-p,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,i,n,a,r,o){var s=1/(i-e),u=1/(a-n),l=1/(r-o);return t[0]=2*r*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*u,t[6]=0,t[7]=0,t[8]=(i+e)*s,t[9]=(a+n)*u,t[10]=(o+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r*2*l,t[15]=0,t},perspective:function(t,e,i,n,a){var r,o=1/Math.tan(e/2);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(r=1/(n-a),t[10]=(a+n)*r,t[14]=2*a*n*r):(t[10]=-1,t[14]=-2*n),t},perspectiveFromFieldOfView:function(t,e,i,n){var a=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(a+r);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(a-r)*l*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t},ortho:function(t,e,i,n,a,r,o){var s=1/(e-i),u=1/(n-a),l=1/(r-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*s,t[13]=(a+n)*u,t[14]=(o+r)*l,t[15]=1,t},lookAt:function(t,e,i,n){var a,r,o,s,u,l,c,h,b,d,f=e[0],p=e[1],m=e[2],v=n[0],w=n[1],g=n[2],M=i[0],y=i[1],P=i[2];return Math.abs(f-M)<1e-6&&Math.abs(p-y)<1e-6&&Math.abs(m-P)<1e-6?S(t):(c=f-M,h=p-y,b=m-P,a=w*(b*=d=1/Math.hypot(c,h,b))-g*(h*=d),r=g*(c*=d)-v*b,o=v*h-w*c,(d=Math.hypot(a,r,o))?(a*=d=1/d,r*=d,o*=d):(a=0,r=0,o=0),s=h*o-b*r,u=b*a-c*o,l=c*r-h*a,(d=Math.hypot(s,u,l))?(s*=d=1/d,u*=d,l*=d):(s=0,u=0,l=0),t[0]=a,t[1]=s,t[2]=c,t[3]=0,t[4]=r,t[5]=u,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=b,t[11]=0,t[12]=-(a*f+r*p+o*m),t[13]=-(s*f+u*p+l*m),t[14]=-(c*f+h*p+b*m),t[15]=1,t)},targetTo:function(t,e,i,n){var a=e[0],r=e[1],o=e[2],s=n[0],u=n[1],l=n[2],c=a-i[0],h=r-i[1],b=o-i[2],d=c*c+h*h+b*b;d>0&&(c*=d=1/Math.sqrt(d),h*=d,b*=d);var f=u*b-l*h,p=l*c-s*b,m=s*h-u*c;return(d=f*f+p*p+m*m)>0&&(f*=d=1/Math.sqrt(d),p*=d,m*=d),t[0]=f,t[1]=p,t[2]=m,t[3]=0,t[4]=h*m-b*p,t[5]=b*f-c*m,t[6]=c*p-h*f,t[7]=0,t[8]=c,t[9]=h,t[10]=b,t[11]=0,t[12]=a,t[13]=r,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t},subtract:A,multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t},multiplyScalarAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,e){var i=t[0],n=t[1],a=t[2],r=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],b=t[10],d=t[11],f=t[12],p=t[13],m=t[14],v=t[15],w=e[0],g=e[1],M=e[2],S=e[3],y=e[4],P=e[5],x=e[6],I=e[7],C=e[8],A=e[9],T=e[10],E=e[11],D=e[12],G=e[13],X=e[14],k=e[15];return Math.abs(i-w)<=1e-6*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(n-g)<=1e-6*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-M)<=1e-6*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(r-S)<=1e-6*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(o-y)<=1e-6*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(s-P)<=1e-6*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(u-x)<=1e-6*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-I)<=1e-6*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-C)<=1e-6*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(h-A)<=1e-6*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(b-T)<=1e-6*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(d-E)<=1e-6*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(f-D)<=1e-6*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(p-G)<=1e-6*Math.max(1,Math.abs(p),Math.abs(G))&&Math.abs(m-X)<=1e-6*Math.max(1,Math.abs(m),Math.abs(X))&&Math.abs(v-k)<=1e-6*Math.max(1,Math.abs(v),Math.abs(k))},mul:T,sub:E});function G(){var t=new e(3);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function X(t){var e=t[0],i=t[1],n=t[2];return Math.hypot(e,i,n)}function k(t,i,n){var a=new e(3);return a[0]=t,a[1]=i,a[2]=n,a}function B(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function R(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function L(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function _(t,e){var i=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.hypot(i,n,a)}function F(t,e){var i=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return i*i+n*n+a*a}function W(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function z(t,e){var i=e[0],n=e[1],a=e[2],r=i*i+n*n+a*a;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function H(t,e,i){var n=e[0],a=e[1],r=e[2],o=i[0],s=i[1],u=i[2];return t[0]=a*u-r*s,t[1]=r*o-n*u,t[2]=n*s-a*o,t}var V,q=B,j=R,Y=L,U=_,N=F,Q=X,Z=W,K=(V=G(),function(t,e,i,n,a,r){var o,s;for(e||(e=3),i||(i=0),s=n?Math.min(n*e+i,t.length):t.length,o=i;o<s;o+=e)V[0]=t[o],V[1]=t[o+1],V[2]=t[o+2],a(V,V,r),t[o]=V[0],t[o+1]=V[1],t[o+2]=V[2];return t}),J=Object.freeze({__proto__:null,create:G,clone:function(t){var i=new e(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i},length:X,fromValues:k,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},subtract:B,multiply:R,divide:L,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t},distance:_,squaredDistance:F,squaredLength:W,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:z,dot:O,cross:H,lerp:function(t,e,i,n){var a=e[0],r=e[1],o=e[2];return t[0]=a+n*(i[0]-a),t[1]=r+n*(i[1]-r),t[2]=o+n*(i[2]-o),t},hermite:function(t,e,i,n,a,r){var o=r*r,s=o*(2*r-3)+1,u=o*(r-2)+r,l=o*(r-1),c=o*(3-2*r);return t[0]=e[0]*s+i[0]*u+n[0]*l+a[0]*c,t[1]=e[1]*s+i[1]*u+n[1]*l+a[1]*c,t[2]=e[2]*s+i[2]*u+n[2]*l+a[2]*c,t},bezier:function(t,e,i,n,a,r){var o=1-r,s=o*o,u=r*r,l=s*o,c=3*r*s,h=3*u*o,b=u*r;return t[0]=e[0]*l+i[0]*c+n[0]*h+a[0]*b,t[1]=e[1]*l+i[1]*c+n[1]*h+a[1]*b,t[2]=e[2]*l+i[2]*c+n[2]*h+a[2]*b,t},random:function(t,e){e=e||1;var n=2*i()*Math.PI,a=2*i()-1,r=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=a*e,t},transformMat4:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=i[3]*n+i[7]*a+i[11]*r+i[15];return o=o||1,t[0]=(i[0]*n+i[4]*a+i[8]*r+i[12])/o,t[1]=(i[1]*n+i[5]*a+i[9]*r+i[13])/o,t[2]=(i[2]*n+i[6]*a+i[10]*r+i[14])/o,t},transformMat3:function(t,e,i){var n=e[0],a=e[1],r=e[2];return t[0]=n*i[0]+a*i[3]+r*i[6],t[1]=n*i[1]+a*i[4]+r*i[7],t[2]=n*i[2]+a*i[5]+r*i[8],t},transformQuat:function(t,e,i){var n=i[0],a=i[1],r=i[2],o=i[3],s=e[0],u=e[1],l=e[2],c=a*l-r*u,h=r*s-n*l,b=n*u-a*s,d=a*b-r*h,f=r*c-n*b,p=n*h-a*c,m=2*o;return c*=m,h*=m,b*=m,d*=2,f*=2,p*=2,t[0]=s+c+d,t[1]=u+h+f,t[2]=l+b+p,t},rotateX:function(t,e,i,n){var a=[],r=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],r[0]=a[0],r[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),r[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},rotateY:function(t,e,i,n){var a=[],r=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],r[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),r[1]=a[1],r[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},rotateZ:function(t,e,i,n){var a=[],r=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],r[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),r[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),r[2]=a[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},angle:function(t,e){var i=t[0],n=t[1],a=t[2],r=e[0],o=e[1],s=e[2],u=Math.sqrt(i*i+n*n+a*a)*Math.sqrt(r*r+o*o+s*s),l=u&&O(t,e)/u;return Math.acos(Math.min(Math.max(l,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals:function(t,e){var i=t[0],n=t[1],a=t[2],r=e[0],o=e[1],s=e[2];return Math.abs(i-r)<=1e-6*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(n-o)<=1e-6*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-s)<=1e-6*Math.max(1,Math.abs(a),Math.abs(s))},sub:q,mul:j,div:Y,dist:U,sqrDist:N,len:Q,sqrLen:Z,forEach:K});function $(){var t=new e(4);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function tt(t){var i=new e(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i}function et(t,i,n,a){var r=new e(4);return r[0]=t,r[1]=i,r[2]=n,r[3]=a,r}function it(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function nt(t,e,i,n,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=a,t}function at(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function rt(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function ot(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function st(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function ut(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function lt(t,e){var i=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],r=e[3]-t[3];return Math.hypot(i,n,a,r)}function ct(t,e){var i=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],r=e[3]-t[3];return i*i+n*n+a*a+r*r}function ht(t){var e=t[0],i=t[1],n=t[2],a=t[3];return Math.hypot(e,i,n,a)}function bt(t){var e=t[0],i=t[1],n=t[2],a=t[3];return e*e+i*i+n*n+a*a}function dt(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=i*i+n*n+a*a+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=i*o,t[1]=n*o,t[2]=a*o,t[3]=r*o,t}function ft(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function pt(t,e,i,n){var a=e[0],r=e[1],o=e[2],s=e[3];return t[0]=a+n*(i[0]-a),t[1]=r+n*(i[1]-r),t[2]=o+n*(i[2]-o),t[3]=s+n*(i[3]-s),t}function mt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function vt(t,e){var i=t[0],n=t[1],a=t[2],r=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(i-o)<=1e-6*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-l)<=1e-6*Math.max(1,Math.abs(r),Math.abs(l))}var wt=rt,gt=ot,Mt=st,St=lt,yt=ct,Pt=ht,xt=bt,It=function(){var t=$();return function(e,i,n,a,r,o){var s,u;for(i||(i=4),n||(n=0),u=a?Math.min(a*i+n,e.length):e.length,s=n;s<u;s+=i)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],r(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),Ct=Object.freeze({__proto__:null,create:$,clone:tt,fromValues:et,copy:it,set:nt,add:at,subtract:rt,multiply:ot,divide:st,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:ut,scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},distance:lt,squaredDistance:ct,length:ht,squaredLength:bt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize:dt,dot:ft,cross:function(t,e,i,n){var a=i[0]*n[1]-i[1]*n[0],r=i[0]*n[2]-i[2]*n[0],o=i[0]*n[3]-i[3]*n[0],s=i[1]*n[2]-i[2]*n[1],u=i[1]*n[3]-i[3]*n[1],l=i[2]*n[3]-i[3]*n[2],c=e[0],h=e[1],b=e[2],d=e[3];return t[0]=h*l-b*u+d*s,t[1]=-c*l+b*o-d*r,t[2]=c*u-h*o+d*a,t[3]=-c*s+h*r-b*a,t},lerp:pt,random:function(t,e){var n,a,r,o,s,u;e=e||1;do{s=(n=2*i()-1)*n+(a=2*i()-1)*a}while(s>=1);do{u=(r=2*i()-1)*r+(o=2*i()-1)*o}while(u>=1);var l=Math.sqrt((1-s)/u);return t[0]=e*n,t[1]=e*a,t[2]=e*r*l,t[3]=e*o*l,t},transformMat4:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3];return t[0]=i[0]*n+i[4]*a+i[8]*r+i[12]*o,t[1]=i[1]*n+i[5]*a+i[9]*r+i[13]*o,t[2]=i[2]*n+i[6]*a+i[10]*r+i[14]*o,t[3]=i[3]*n+i[7]*a+i[11]*r+i[15]*o,t},transformQuat:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=i[0],s=i[1],u=i[2],l=i[3],c=l*n+s*r-u*a,h=l*a+u*n-o*r,b=l*r+o*a-s*n,d=-o*n-s*a-u*r;return t[0]=c*l+d*-o+h*-u-b*-s,t[1]=h*l+d*-s+b*-o-c*-u,t[2]=b*l+d*-u+c*-s-h*-o,t[3]=e[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:mt,equals:vt,sub:wt,mul:gt,div:Mt,dist:St,sqrDist:yt,len:Pt,sqrLen:xt,forEach:It});function At(){var t=new e(4);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tt(t,e,i){i*=.5;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function Et(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=i[0],u=i[1],l=i[2],c=i[3];return t[0]=n*c+o*s+a*l-r*u,t[1]=a*c+o*u+r*s-n*l,t[2]=r*c+o*l+n*u-a*s,t[3]=o*c-n*s-a*u-r*l,t}function Dt(t,e,i){i*=.5;var n=e[0],a=e[1],r=e[2],o=e[3],s=Math.sin(i),u=Math.cos(i);return t[0]=n*u+o*s,t[1]=a*u+r*s,t[2]=r*u-a*s,t[3]=o*u-n*s,t}function Gt(t,e,i){i*=.5;var n=e[0],a=e[1],r=e[2],o=e[3],s=Math.sin(i),u=Math.cos(i);return t[0]=n*u-r*s,t[1]=a*u+o*s,t[2]=r*u+n*s,t[3]=o*u-a*s,t}function Xt(t,e,i){i*=.5;var n=e[0],a=e[1],r=e[2],o=e[3],s=Math.sin(i),u=Math.cos(i);return t[0]=n*u+a*s,t[1]=a*u-n*s,t[2]=r*u+o*s,t[3]=o*u-r*s,t}function kt(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=Math.sqrt(i*i+n*n+a*a),s=Math.exp(r),u=o>0?s*Math.sin(o)/o:0;return t[0]=i*u,t[1]=n*u,t[2]=a*u,t[3]=s*Math.cos(o),t}function Bt(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=Math.sqrt(i*i+n*n+a*a),s=o>0?Math.atan2(o,r)/o:0;return t[0]=i*s,t[1]=n*s,t[2]=a*s,t[3]=.5*Math.log(i*i+n*n+a*a+r*r),t}function Rt(t,e,i,n){var a,r,o,s,u,l=e[0],c=e[1],h=e[2],b=e[3],d=i[0],f=i[1],p=i[2],m=i[3];return(r=l*d+c*f+h*p+b*m)<0&&(r=-r,d=-d,f=-f,p=-p,m=-m),1-r>1e-6?(a=Math.acos(r),o=Math.sin(a),s=Math.sin((1-n)*a)/o,u=Math.sin(n*a)/o):(s=1-n,u=n),t[0]=s*l+u*d,t[1]=s*c+u*f,t[2]=s*h+u*p,t[3]=s*b+u*m,t}function Lt(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var r=(a+1)%3,o=(a+2)%3;i=Math.sqrt(e[3*a+a]-e[3*r+r]-e[3*o+o]+1),t[a]=.5*i,i=.5/i,t[3]=(e[3*r+o]-e[3*o+r])*i,t[r]=(e[3*r+a]+e[3*a+r])*i,t[o]=(e[3*o+a]+e[3*a+o])*i}return t}var _t,Ft,Wt,zt,Ot,Ht,Vt=tt,qt=et,jt=it,Yt=nt,Ut=at,Nt=Et,Qt=ut,Zt=ft,Kt=pt,Jt=ht,$t=Jt,te=bt,ee=te,ie=dt,ne=mt,ae=vt,re=(_t=G(),Ft=k(1,0,0),Wt=k(0,1,0),function(t,e,i){var n=O(e,i);return n<-.999999?(H(_t,Ft,e),Q(_t)<1e-6&&H(_t,Wt,e),z(_t,_t),Tt(t,_t,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(H(_t,e,i),t[0]=_t[0],t[1]=_t[1],t[2]=_t[2],t[3]=1+n,ie(t,t))}),oe=(zt=At(),Ot=At(),function(t,e,i,n,a,r){return Rt(zt,e,a,r),Rt(Ot,i,n,r),Rt(t,zt,Ot,2*r*(1-r)),t}),se=(Ht=p(),function(t,e,i,n){return Ht[0]=i[0],Ht[3]=i[1],Ht[6]=i[2],Ht[1]=n[0],Ht[4]=n[1],Ht[7]=n[2],Ht[2]=-e[0],Ht[5]=-e[1],Ht[8]=-e[2],ie(t,Lt(t,Ht))}),ue=Object.freeze({__proto__:null,create:At,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:Tt,getAxisAngle:function(t,e){var i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>1e-6?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i},getAngle:function(t,e){var i=Zt(t,e);return Math.acos(2*i*i-1)},multiply:Et,rotateX:Dt,rotateY:Gt,rotateZ:Xt,calculateW:function(t,e){var i=e[0],n=e[1],a=e[2];return t[0]=i,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-a*a)),t},exp:kt,ln:Bt,pow:function(t,e,i){return Bt(t,e),Qt(t,t,i),kt(t,t),t},slerp:Rt,random:function(t){var e=i(),n=i(),a=i(),r=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*a),t[3]=o*Math.cos(2*Math.PI*a),t},invert:function(t,e){var i=e[0],n=e[1],a=e[2],r=e[3],o=i*i+n*n+a*a+r*r,s=o?1/o:0;return t[0]=-i*s,t[1]=-n*s,t[2]=-a*s,t[3]=r*s,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat3:Lt,fromEuler:function(t,e,i,n){var a=.5*Math.PI/180;e*=a,i*=a,n*=a;var r=Math.sin(e),o=Math.cos(e),s=Math.sin(i),u=Math.cos(i),l=Math.sin(n),c=Math.cos(n);return t[0]=r*u*c-o*s*l,t[1]=o*s*c+r*u*l,t[2]=o*u*l-r*s*c,t[3]=o*u*c+r*s*l,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:Vt,fromValues:qt,copy:jt,set:Yt,add:Ut,mul:Nt,scale:Qt,dot:Zt,lerp:Kt,length:Jt,len:$t,squaredLength:te,sqrLen:ee,normalize:ie,exactEquals:ne,equals:ae,rotationTo:re,sqlerp:oe,setAxes:se});function le(t,e,i){var n=.5*i[0],a=.5*i[1],r=.5*i[2],o=e[0],s=e[1],u=e[2],l=e[3];return t[0]=o,t[1]=s,t[2]=u,t[3]=l,t[4]=n*l+a*u-r*s,t[5]=a*l+r*o-n*u,t[6]=r*l+n*s-a*o,t[7]=-n*o-a*s-r*u,t}function ce(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}var he=jt,be=jt;function de(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=i[4],u=i[5],l=i[6],c=i[7],h=e[4],b=e[5],d=e[6],f=e[7],p=i[0],m=i[1],v=i[2],w=i[3];return t[0]=n*w+o*p+a*v-r*m,t[1]=a*w+o*m+r*p-n*v,t[2]=r*w+o*v+n*m-a*p,t[3]=o*w-n*p-a*m-r*v,t[4]=n*c+o*s+a*l-r*u+h*w+f*p+b*v-d*m,t[5]=a*c+o*u+r*s-n*l+b*w+f*m+d*p-h*v,t[6]=r*c+o*l+n*u-a*s+d*w+f*v+h*m-b*p,t[7]=o*c-n*s-a*u-r*l+f*w-h*p-b*m-d*v,t}var fe=de,pe=Zt,me=Jt,ve=me,we=te,ge=we,Me=Object.freeze({__proto__:null,create:function(){var t=new e(8);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var i=new e(8);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i},fromValues:function(t,i,n,a,r,o,s,u){var l=new e(8);return l[0]=t,l[1]=i,l[2]=n,l[3]=a,l[4]=r,l[5]=o,l[6]=s,l[7]=u,l},fromRotationTranslationValues:function(t,i,n,a,r,o,s){var u=new e(8);u[0]=t,u[1]=i,u[2]=n,u[3]=a;var l=.5*r,c=.5*o,h=.5*s;return u[4]=l*a+c*n-h*i,u[5]=c*a+h*t-l*n,u[6]=h*a+l*i-c*t,u[7]=-l*t-c*i-h*n,u},fromRotationTranslation:le,fromTranslation:function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,i){var n=At();C(n,i);var a=new e(3);return x(a,i),le(t,n,a),t},copy:ce,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,e,i,n,a,r,o,s,u){return t[0]=e,t[1]=i,t[2]=n,t[3]=a,t[4]=r,t[5]=o,t[6]=s,t[7]=u,t},getReal:he,getDual:function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setReal:be,setDual:function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation:function(t,e){var i=e[4],n=e[5],a=e[6],r=e[7],o=-e[0],s=-e[1],u=-e[2],l=e[3];return t[0]=2*(i*l+r*o+n*u-a*s),t[1]=2*(n*l+r*s+a*o-i*u),t[2]=2*(a*l+r*u+i*s-n*o),t},translate:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=.5*i[0],u=.5*i[1],l=.5*i[2],c=e[4],h=e[5],b=e[6],d=e[7];return t[0]=n,t[1]=a,t[2]=r,t[3]=o,t[4]=o*s+a*l-r*u+c,t[5]=o*u+r*s-n*l+h,t[6]=o*l+n*u-a*s+b,t[7]=-n*s-a*u-r*l+d,t},rotateX:function(t,e,i){var n=-e[0],a=-e[1],r=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=s*o+c*n+u*r-l*a,b=u*o+c*a+l*n-s*r,d=l*o+c*r+s*a-u*n,f=c*o-s*n-u*a-l*r;return Dt(t,e,i),n=t[0],a=t[1],r=t[2],o=t[3],t[4]=h*o+f*n+b*r-d*a,t[5]=b*o+f*a+d*n-h*r,t[6]=d*o+f*r+h*a-b*n,t[7]=f*o-h*n-b*a-d*r,t},rotateY:function(t,e,i){var n=-e[0],a=-e[1],r=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=s*o+c*n+u*r-l*a,b=u*o+c*a+l*n-s*r,d=l*o+c*r+s*a-u*n,f=c*o-s*n-u*a-l*r;return Gt(t,e,i),n=t[0],a=t[1],r=t[2],o=t[3],t[4]=h*o+f*n+b*r-d*a,t[5]=b*o+f*a+d*n-h*r,t[6]=d*o+f*r+h*a-b*n,t[7]=f*o-h*n-b*a-d*r,t},rotateZ:function(t,e,i){var n=-e[0],a=-e[1],r=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=s*o+c*n+u*r-l*a,b=u*o+c*a+l*n-s*r,d=l*o+c*r+s*a-u*n,f=c*o-s*n-u*a-l*r;return Xt(t,e,i),n=t[0],a=t[1],r=t[2],o=t[3],t[4]=h*o+f*n+b*r-d*a,t[5]=b*o+f*a+d*n-h*r,t[6]=d*o+f*r+h*a-b*n,t[7]=f*o-h*n-b*a-d*r,t},rotateByQuatAppend:function(t,e,i){var n=i[0],a=i[1],r=i[2],o=i[3],s=e[0],u=e[1],l=e[2],c=e[3];return t[0]=s*o+c*n+u*r-l*a,t[1]=u*o+c*a+l*n-s*r,t[2]=l*o+c*r+s*a-u*n,t[3]=c*o-s*n-u*a-l*r,s=e[4],u=e[5],l=e[6],c=e[7],t[4]=s*o+c*n+u*r-l*a,t[5]=u*o+c*a+l*n-s*r,t[6]=l*o+c*r+s*a-u*n,t[7]=c*o-s*n-u*a-l*r,t},rotateByQuatPrepend:function(t,e,i){var n=e[0],a=e[1],r=e[2],o=e[3],s=i[0],u=i[1],l=i[2],c=i[3];return t[0]=n*c+o*s+a*l-r*u,t[1]=a*c+o*u+r*s-n*l,t[2]=r*c+o*l+n*u-a*s,t[3]=o*c-n*s-a*u-r*l,s=i[4],u=i[5],l=i[6],c=i[7],t[4]=n*c+o*s+a*l-r*u,t[5]=a*c+o*u+r*s-n*l,t[6]=r*c+o*l+n*u-a*s,t[7]=o*c-n*s-a*u-r*l,t},rotateAroundAxis:function(t,e,i,n){if(Math.abs(n)<1e-6)return ce(t,e);var a=Math.hypot(i[0],i[1],i[2]);n*=.5;var r=Math.sin(n),o=r*i[0]/a,s=r*i[1]/a,u=r*i[2]/a,l=Math.cos(n),c=e[0],h=e[1],b=e[2],d=e[3];t[0]=c*l+d*o+h*u-b*s,t[1]=h*l+d*s+b*o-c*u,t[2]=b*l+d*u+c*s-h*o,t[3]=d*l-c*o-h*s-b*u;var f=e[4],p=e[5],m=e[6],v=e[7];return t[4]=f*l+v*o+p*u-m*s,t[5]=p*l+v*s+m*o-f*u,t[6]=m*l+v*u+f*s-p*o,t[7]=v*l-f*o-p*s-m*u,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t},multiply:de,mul:fe,scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t},dot:pe,lerp:function(t,e,i,n){var a=1-n;return pe(e,i)<0&&(n=-n),t[0]=e[0]*a+i[0]*n,t[1]=e[1]*a+i[1]*n,t[2]=e[2]*a+i[2]*n,t[3]=e[3]*a+i[3]*n,t[4]=e[4]*a+i[4]*n,t[5]=e[5]*a+i[5]*n,t[6]=e[6]*a+i[6]*n,t[7]=e[7]*a+i[7]*n,t},invert:function(t,e){var i=we(e);return t[0]=-e[0]/i,t[1]=-e[1]/i,t[2]=-e[2]/i,t[3]=e[3]/i,t[4]=-e[4]/i,t[5]=-e[5]/i,t[6]=-e[6]/i,t[7]=e[7]/i,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},length:me,len:ve,squaredLength:we,sqrLen:ge,normalize:function(t,e){var i=we(e);if(i>0){i=Math.sqrt(i);var n=e[0]/i,a=e[1]/i,r=e[2]/i,o=e[3]/i,s=e[4],u=e[5],l=e[6],c=e[7],h=n*s+a*u+r*l+o*c;t[0]=n,t[1]=a,t[2]=r,t[3]=o,t[4]=(s-n*h)/i,t[5]=(u-a*h)/i,t[6]=(l-r*h)/i,t[7]=(c-o*h)/i}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals:function(t,e){var i=t[0],n=t[1],a=t[2],r=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=e[0],h=e[1],b=e[2],d=e[3],f=e[4],p=e[5],m=e[6],v=e[7];return Math.abs(i-c)<=1e-6*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=1e-6*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-b)<=1e-6*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(r-d)<=1e-6*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-f)<=1e-6*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-p)<=1e-6*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-m)<=1e-6*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-v)<=1e-6*Math.max(1,Math.abs(l),Math.abs(v))}});function Se(){var t=new e(2);return e!=Float32Array&&(t[0]=0,t[1]=0),t}function ye(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Pe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function xe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Ie(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.hypot(i,n)}function Ce(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function Ae(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function Te(t){var e=t[0],i=t[1];return e*e+i*i}var Ee=Ae,De=ye,Ge=Pe,Xe=xe,ke=Ie,Be=Ce,Re=Te,Le=function(){var t=Se();return function(e,i,n,a,r,o){var s,u;for(i||(i=2),n||(n=0),u=a?Math.min(a*i+n,e.length):e.length,s=n;s<u;s+=i)t[0]=e[s],t[1]=e[s+1],r(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}(),_e=Object.freeze({__proto__:null,create:Se,clone:function(t){var i=new e(2);return i[0]=t[0],i[1]=t[1],i},fromValues:function(t,i){var n=new e(2);return n[0]=t,n[1]=i,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,i){return t[0]=e,t[1]=i,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},subtract:ye,multiply:Pe,divide:xe,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},distance:Ie,squaredDistance:Ce,length:Ae,squaredLength:Te,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize:function(t,e){var i=e[0],n=e[1],a=i*i+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},cross:function(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t},lerp:function(t,e,i,n){var a=e[0],r=e[1];return t[0]=a+n*(i[0]-a),t[1]=r+n*(i[1]-r),t},random:function(t,e){e=e||1;var n=2*i()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},transformMat2:function(t,e,i){var n=e[0],a=e[1];return t[0]=i[0]*n+i[2]*a,t[1]=i[1]*n+i[3]*a,t},transformMat2d:function(t,e,i){var n=e[0],a=e[1];return t[0]=i[0]*n+i[2]*a+i[4],t[1]=i[1]*n+i[3]*a+i[5],t},transformMat3:function(t,e,i){var n=e[0],a=e[1];return t[0]=i[0]*n+i[3]*a+i[6],t[1]=i[1]*n+i[4]*a+i[7],t},transformMat4:function(t,e,i){var n=e[0],a=e[1];return t[0]=i[0]*n+i[4]*a+i[12],t[1]=i[1]*n+i[5]*a+i[13],t},rotate:function(t,e,i,n){var a=e[0]-i[0],r=e[1]-i[1],o=Math.sin(n),s=Math.cos(n);return t[0]=a*s-r*o+i[0],t[1]=a*o+r*s+i[1],t},angle:function(t,e){var i=t[0],n=t[1],a=e[0],r=e[1],o=Math.sqrt(i*i+n*n)*Math.sqrt(a*a+r*r),s=o&&(i*a+n*r)/o;return Math.acos(Math.min(Math.max(s,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals:function(t,e){var i=t[0],n=t[1],a=e[0],r=e[1];return Math.abs(i-a)<=1e-6*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-r)<=1e-6*Math.max(1,Math.abs(n),Math.abs(r))},len:Ee,sub:De,mul:Ge,div:Xe,dist:ke,sqrDist:Be,sqrLen:Re,forEach:Le});t.glMatrix=a,t.mat2=l,t.mat2d=f,t.mat3=M,t.mat4=D,t.quat=ue,t.quat2=Me,t.vec2=_e,t.vec3=J,t.vec4=Ct,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"use strict";var i="model",n="name",a="type",r="vendor",o="version",s="mobile",u="tablet",l="smarttv",c={extend:function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(t,e){for(var i,n,a,r,o,s,u=0;u<e.length&&!o;){var l=e[u],c=e[u+1];for(i=n=0;i<l.length&&!o;)if(o=l[i++].exec(t))for(a=0;a<c.length;a++)s=o[++n],"object"==typeof(r=c[a])&&r.length>0?2==r.length?"function"==typeof r[1]?this[r[0]]=r[1].call(this,s):this[r[0]]=r[1]:3==r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?this[r[0]]=s?s.replace(r[1],r[2]):void 0:this[r[0]]=s?r[1].call(this,s,r[2]):void 0:4==r.length&&(this[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):void 0):this[r]=s||void 0;u+=2}},str:function(t,e){for(var i in e)if("object"==typeof e[i]&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(c.has(e[i][n],t))return"?"===i?void 0:i}else if(c.has(e[i],t))return"?"===i?void 0:i;return t}},b={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},d={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,o],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],o],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],o],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[n,o],[/(konqueror)\/([\w\.]+)/i],[[n,"Konqueror"],o],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],o],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[n,"Edge"],o],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],o],[/(Avast)\/([\w\.]+)/i],[[n,"Avast Secure Browser"],o],[/(AVG)\/([\w\.]+)/i],[[n,"AVG Secure Browser"],o],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],o],[/(focus)\/([\w\.]+)/i],[[n,"Firefox Focus"],o],[/(opt)\/([\w\.]+)/i],[[n,"Opera Touch"],o],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],o],[/(windowswechat qbcore)\/([\w\.]+)/i],[[n,"WeChat(Win) Desktop"],o],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],o],[/(brave)\/([\w\.]+)/i],[[n,"Brave"],o],[/(qqbrowserlite)\/([\w\.]+)/i],[n,o],[/(QQ)\/([\d\.]+)/i],[n,o],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,o],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[n,o],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[n,o],[/(MetaSr)[\/\s]?([\w\.]+)/i],[n],[/(LBBROWSER)/i],[n],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[o,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[o,[n,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[n,o],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[o,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],o],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],o],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[o,[n,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[n,"Sailfish Browser"],o],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,o],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],o],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[n,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],o],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],o],[/fxios\/([\w\.-]+)/i],[o,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[o,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[o,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],o],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[o,h.str,b.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[n,o],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,o]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",c.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",c.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",c.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[i,r,[a,u]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[r,"Apple"],[a,u]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[r,"Apple"],[a,l]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[r,i,[a,u]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[i,[r,"Amazon"],[a,u]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[i,h.str,b.device.amazon.model],[r,"Amazon"],[a,s]],[/android.+aft([bms])\sbuild/i],[i,[r,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,r,[a,s]],[/\((ip[honed|\s\w*]+);/i],[i,[r,"Apple"],[a,s]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[r,i,[a,s]],[/\(bb10;\s(\w+)/i],[i,[r,"BlackBerry"],[a,s]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[i,[r,"Asus"],[a,u]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[r,"Sony"],[i,"Xperia Tablet"],[a,u]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[i,[r,"Sony"],[a,s]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[r,i,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[r,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[r,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[r,h.str,b.device.sprint.vendor],[i,h.str,b.device.sprint.model],[a,s]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[r,[i,/_/g," "],[a,s]],[/(nexus\s9)/i],[i,[r,"HTC"],[a,u]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[i,[r,"Huawei"],[a,s]],[/android.+(bah2?-a?[lw]\d{2})/i],[i,[r,"Huawei"],[a,u]],[/(microsoft);\s(lumia[\s\w]+)/i],[r,i,[a,s]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[r,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[r,"Microsoft"],[a,s]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[r,"Motorola"],[a,s]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[r,"Motorola"],[a,u]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[r,c.trim],[i,c.trim],[a,l]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[r,"Samsung"],[a,l]],[/\(dtv[\);].+(aquos)/i],[i,[r,"Sharp"],[a,l]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[r,"Samsung"],i,[a,u]],[/smart-tv.+(samsung)/i],[r,[a,l],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[r,"Samsung"],i,[a,s]],[/sie-(\w*)/i],[i,[r,"Siemens"],[a,s]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[r,"Nokia"],i,[a,s]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[i,[r,"Acer"],[a,u]],[/android.+([vl]k\-?\d{3})\s+build/i],[i,[r,"LG"],[a,u]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[r,"LG"],i,[a,u]],[/(lg) netcast\.tv/i],[r,i,[a,l]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[r,"LG"],[a,s]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[r,i,[a,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[r,"Lenovo"],[a,u]],[/(lenovo)[_\s-]?([\w-]+)/i],[r,i,[a,s]],[/linux;.+((jolla));/i],[r,i,[a,s]],[/((pebble))app\/[\d\.]+\s/i],[r,i,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[r,i,[a,s]],[/crkey/i],[[i,"Chromecast"],[r,"Google"],[a,l]],[/android.+;\s(glass)\s\d/i],[i,[r,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[i,[r,"Google"],[a,u]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[i,[r,"Google"],[a,s]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[r,"Xiaomi"],[a,s]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[r,"Xiaomi"],[a,u]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[r,"Meizu"],[a,s]],[/(mz)-([\w-]{2,})/i],[[r,"Meizu"],i,[a,s]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[i,[r,"OnePlus"],[a,s]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[i,[r,"RCA"],[a,u]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[i,[r,"Dell"],[a,u]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[i,[r,"Verizon"],[a,u]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[r,"Barnes & Noble"],i,[a,u]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[i,[r,"NuVision"],[a,u]],[/android.+;\s(k88)\sbuild/i],[i,[r,"ZTE"],[a,u]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[i,[r,"Swiss"],[a,s]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[i,[r,"Swiss"],[a,u]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[i,[r,"Zeki"],[a,u]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[r,"Dragon Touch"],i,[a,u]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[i,[r,"Insignia"],[a,u]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[i,[r,"NextBook"],[a,u]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[r,"Voice"],i,[a,s]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[r,"LvTel"],i,[a,s]],[/android.+;\s(PH-1)\s/i],[i,[r,"Essential"],[a,s]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[i,[r,"Envizen"],[a,u]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[r,i,[a,u]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[i,[r,"MachSpeed"],[a,u]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[r,i,[a,u]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[i,[r,"Rotor"],[a,u]],[/android.+(KS(.+))\s+build/i],[i,[r,"Amazon"],[a,u]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[r,i,[a,u]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,c.lowerize],r,i],[/[\s\/\(](smart-?tv)[;\)]/i],[[a,l]],[/(android[\w\.\s\-]{0,9});.+build/i],[i,[r,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[o,[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,o],[/rv\:([\w\.]{1,9}).+(gecko)/i],[o,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[o,h.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[o,h.str,b.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[n,o],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[n,"Symbian"],o],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],o],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[n,o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],o],[/(sunos)\s?([\w\.\d]*)/i],[[n,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[n,o],[/(haiku)\s(\w+)/i],[n,o],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[o,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[n,o]]},f=function(e,i){if("object"==typeof e&&(i=e,e=void 0),!(this instanceof f))return new f(e,i).getResult();var n=e||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:""),a=i?c.extend(d,i):d;return this.getBrowser=function(){var t={name:void 0,version:void 0};return h.rgx.call(t,n,a.browser),t.major=c.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return h.rgx.call(t,n,a.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return h.rgx.call(t,n,a.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return h.rgx.call(t,n,a.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return h.rgx.call(t,n,a.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this};f.VERSION="0.7.21",f.BROWSER={NAME:n,MAJOR:"major",VERSION:o},f.CPU={ARCHITECTURE:"architecture"},f.DEVICE={MODEL:i,VENDOR:r,TYPE:a,CONSOLE:"console",MOBILE:s,SMARTTV:l,TABLET:u,WEARABLE:"wearable",EMBEDDED:"embedded"},f.ENGINE={NAME:n,VERSION:o},f.OS={NAME:n,VERSION:o},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.UAParser=f):"function"==typeof define&&define.amd?define(function(){return f}):t&&(t.UAParser=f);var p=t&&(t.jQuery||t.Zepto);if(p&&!p.ua){var m=new f;p.ua=m.getResult(),p.ua.get=function(){return m.getUA()},p.ua.set=function(t){m.setUA(t);var e=m.getResult();for(var i in e)p.ua[i]=e[i]}}}("object"==typeof window?window:this),beablib=window.beablib||{},beablib.Audio=beablib.Audio||{},beablib.Core=beablib.Core||{},beablib.Game=beablib.Game||{},function(){"use strict";var t="BeablibAudioSFXMute:",e=beablib.Audio,i=beablib.Core,n=(beablib.Game,[]),a=function(t,e){var i={};void 0!==e&&void 0!==e.Loop&&e.Loop&&(i.loop=-1);var a=n[t];return void 0!==a&&(t=a.sample,i.startTime=a.start,i.duration=a.length),createjs.WebAudioPlugin.context&&"suspended"===createjs.WebAudioPlugin.context.state&&createjs.WebAudioPlugin.context.resume(),createjs.Sound.play(t,i)},r=function(e,i){if(null===e&&(e=!1),"string"==typeof e&&(e="true"===e),createjs.Sound.muted=e,beablib.EventHandler.dispatchEvent(beablib.Game.Events.UpdateAudio),void 0===i||!0===i)try{localStorage.setItem(t,e)}catch(t){}},o=null;e.PlayRetain=function(t,e){return createjs.Sound.play(t,{loop:e})},e.PlayMusic=function(t){e.StopMusic(),o=a(t,{Loop:!0})},e.StopMusic=function(){o&&(o.stop(),o=null)},e.Play=a,e.SetMute=r,e.GetMute=function(){return createjs.Sound.muted},e.ParseAudioSprites=function(t,e){var i=beablib.GetJSONObjectByID(e);if(i&&void 0!==i.spritemap)for(var a in i.spritemap){var r=i.spritemap[a],o=r.type?r.type:"sfx",s=Math.ceil(1e3*r.start),u=Math.ceil(1e3*(r.end-r.start)),l="audio/"+a;n[a]={sample:t,type:o,start:s,length:u,level:100,alternate:l}}},i.InitAudio=function(e){e.installPlugin(createjs.Sound),createjs.Sound.alternateExtensions=["ogg"],document.title,t+=document.title;try{r(localStorage.getItem(t))}catch(t){r(!1)}}}(),beablib=window.beablib||{},beablib.Core=beablib.Core||{},beablib.FontsLoader=beablib.FontsLoader||{},beablib.Game=beablib.Game||{},function(){"use strict";beablib.Core;var t=beablib.FontsLoader,e=beablib.Game,i=function(t,e,i){for(var n=t.length,a=function(t){!t,0===--n&&"function"==typeof i&&i()},r=0;r<t.length;r++){new FontFaceObserver(t[r].FontName).load().then(function(){a(!0)},function(){a(!1)})}};t.Load=function(t,n,a){if(void 0!==t&&t.length>0)if("observer"===e.FontLoader)i(t,n,a);else{for(var r=[],o=0;o<t.length;o++){var s=t[o].FontName,u=void 0!==t[o].FontURL?t[o].FontURL:beablib.GetFontPath(t[o].FontFile),l=document.createElement("style");l.appendChild(document.createTextNode(" @font-face {font-family: "+s+"; src: url('"+u+"') format('truetype'); } ")),document.head.appendChild(l),r.push({FontName:s})}i(t,n,a)}else a()}}(),beablib=window.beablib||{},beablib.Core=beablib.Core||{},function(){"use strict";var t=beablib.Core;t.BrowserType="unknown",t.BrowserVersion="unknown",t.Engine="unknown",t.EngineVersion="unknown",t.OS="unknown",t.OSVersion="unknown",t.IsDesktop=!1,t.IsMobile=!1,t.IsTablet=!1,t.IsTouch=!1,t.ParseBrowser=function(){var e=new UAParser,i=e.getBrowser();t.BrowserType=i.name,t.BrowserVersion=i.version;var n=e.getDevice();void 0===n.type?t.IsDesktop=!0:"mobile"===n.type?(t.IsMobile=!0,t.IsTouch=!0):"tablet"===n.type&&(t.IsTablet=!0,t.IsTouch=!0),beablib.IsMobile=t.IsMobile}}(),beablib=window.beablib||{},beablib.Core=beablib.Core||{},function(){"use strict";var t=function(t,e){var i=function(t,e){this.Top=t,this.Left=e}.bind(this),n=function(t,e){this.Width=t,this.Height=e,this.HalfWidth=.5*this.Width,this.HalfHeight=.5*this.Height,this.ScaleX=this.Width/beablib.DeviceSize.Width,this.ScaleY=this.Height/beablib.DeviceSize.Height,this.ScaleFactor=Math.min(this.ScaleX,this.ScaleY)/2}.bind(this);i(0,0),n(t,e),this.Set=function(t,e){n(t,e)},this.SetTopLeft=function(t,e){i(t,e)}};beablib.DeviceSize={Width:480,Height:320},beablib.PageSize={Width:1136,Height:768},beablib.DevicePixelRatio=1,beablib.Orientation="L",beablib.MainView=new t(beablib.DeviceSize.Width,beablib.DeviceSize.Height),t.SetPortrait=function(){beablib.DeviceSize.Height=480,beablib.DeviceSize.Width=320,beablib.PageSize.Height=1136,beablib.PageSize.Width=768,beablib.Orientation="P",beablib.MainView=new t(beablib.DeviceSize.Width,beablib.DeviceSize.Height)},t.SetLandscape=function(){beablib.DeviceSize.Height=320,beablib.DeviceSize.Width=480,beablib.PageSize.Height=768,beablib.PageSize.Width=1136,beablib.Orientation="L",beablib.MainView=new t(beablib.DeviceSize.Width,beablib.DeviceSize.Height)},beablib.View=t}(),function(){"use strict";var t=function(){if("object"==typeof t.instance)return t.instance;t.instance=this,createjs.EventDispatcher.initialize(t.prototype)};beablib.EventHandler=new t,beablib.DispatchEvent=function(t,e){var i=new createjs.Event(t);void 0!==e&&(i.ILProps=e),beablib.EventHandler.dispatchEvent(i)},beablib.ClearEvents=function(t){beablib.EventHandler.clear},beablib.Events={Error:"beablib:Error",EnableGUI:"beablib:EnableGUI",DisableGUI:"beablib:DisableGUI",FontsLoaded:"beablib:FontsLoaded",OrientationChanged:"beablib:OrientationChanged"}}(),function(){"use strict";beablib.PseudoSeed=0,beablib.CalcPseudoSeed=beablib.CalcPseudoSeed||function(t){beablib.PseudoSeed=0},beablib.ShowSettingsMenu=beablib.ShowSettingsMenu||function(){},beablib.ParentCanvasID=beablib.ParentCanvasID||"",beablib.CreateCanvas=function(t){var e=null;if(void 0!==t){if(e=void 0!==t.canvas?t.canvas:document.createElement("canvas"),void 0!==t.id&&(e.id=t.id),void 0!==t.zIndex&&(e.style.zIndex=t.zIndex),void 0!==t.position&&(e.style.position=t.position),void 0!==t.visible&&(e.style.visibility=t.visible?"visible":"hidden"),void 0===t.AddToParent||t.AddToParent){var i=void 0!==t.parentID?t.parentID:beablib.ParentCanvasID,n=document.getElementById(i);n&&n.appendChild(e)}}else e=document.createElement("canvas");return e.style.display="block",e.style.left=0,e.style.top=0,e.style.pointerEvents="none",e.EnablePointerEvents=function(t){e.style.pointerEvents=t?"auto":"none"},e.Show=function(t){e.style.visibility=t?"visible":"hidden"},e.IsOverlayCanvas=!1,e};var t=[];beablib.AddRepositionable=function(e){t.push(e)},beablib.SetRepositionable=function(e){t.push(e),e.Reposition(beablib.MainView.ScaleFactor)},beablib.RepositionAll=function(){for(var e=null,i=beablib.MainView.ScaleFactor,n=0;n<t.length;n++)"function"==typeof(e=t[n]).RepositionEarly&&e.RepositionEarly(i);for(n=0;n<t.length;n++)"function"==typeof(e=t[n]).Reposition&&e.Reposition(i);for(n=0;n<t.length;n++)"function"==typeof(e=t[n]).RepositionLate&&e.RepositionLate(i)},Array.prototype.RandomShuffle=function(){for(var t=0;t<this.length;t++){var e=t+Math.floor(Math.random()*(this.length-t)),i=this[t];this[t]=this[e],this[e]=i}},Array.prototype.PseudoShuffle=function(t){for(var e=0;e<this.length;e++){t=beablib.Maths.PseudoRandom(t);var i=e+Math.floor(t*(this.length-e)),n=this[e];this[e]=this[i],this[i]=n}}}(),beablib=window.beablib||{},beablib.Maths=beablib.Maths||{},function(t){"use strict";var e=beablib.Maths;e.Vector2=function(t,i){t instanceof e.Vector2?(this.X=t.X,this.Y=t.Y):void 0===i?(this.X=t.X,this.Y=t.Y):(this.X=t||0,this.Y=i||0)};var i=e.Vector2;i.prototype={Set:function(t,e){t instanceof i?(this.X=t.X,this.Y=t.Y):void 0===e?(this.X=t.X,this.Y=t.Y):(this.X=t,this.Y=e)},Add:function(t){t instanceof i?(this.X+=t.X,this.Y+=t.Y):(this.X+=t,this.Y+=t)},Subtract:function(t){t instanceof i?(this.X-=t.X,this.Y-=t.Y):(this.X-=t,this.Y-=t)},Multiply:function(t){t instanceof i?(this.X*=t.X,this.Y*=t.Y):(this.X*=t,this.Y*=t)},Divide:function(t){if(t instanceof i)this.X/=t.X,this.Y/=t.Y;else{var e=1/t;this.X*=e,this.Y*=e}},GetLengthSq:function(){return this.X*this.X+this.Y*this.Y},GetLength:function(){return Math.sqrt(this.X*this.X+this.Y*this.Y)},GetInvLength:function(){return e.fisqrt(this.X*this.X+this.Y*this.Y)},toString:function(){return"Vector2[ X:"+this.X.toString()+", Y:"+this.Y.toString()+" ]"}},i.Zero=function(){return new i(0,0)},i.One=function(){return new i(1,1)},i.Up=function(){return new i(0,-1)},i.Down=function(){return new i(0,1)},i.Left=function(){return new i(-1,0)},i.Right=function(){return new i(1,0)},i.Dot=function(t,e){return t.X*e.X+t.Y*e.Y},i.Add=function(t,e){return e instanceof i?new i(t.X+e.X,t.Y+e.Y):new i(t.X+e,t.Y+e)},i.Subtract=function(t,e){return e instanceof i?new i(t.X-e.X,t.Y-e.Y):new i(t.X-e,t.Y-e)},i.Multiply=function(t,e){return e instanceof i?new i(t.X*e.X,t.Y*e.Y):new i(t.X*e,t.Y*e)},i.Divide=function(t,e){if(e instanceof i)return new i(t.X/e.X,t.Y/e.Y);var n=1/e;return new i(t.X*n,t.Y*n)},i.Normalised=function(t){var e=1/t.GetLength();return new i(t.X*e,t.Y*e)},e.Vector3=function(t,i,n){t instanceof e.Vector3?(this.X=t.X,this.Y=t.Y,this.Z=t.z):(this.X=t||0,this.Y=i||0,this.Z=n||0)};var n=e.Vector3;n.prototype={toString:function(){return"Vector3[ X:"+this.X.toString()+", Y:"+this.Y.toString()+", Z:"+this.Z.toString()+" ]"}},n.Zero=function(){return new i(0,0,0)},n.One=function(){return new i(1,1,1)},n.Up=function(){return new i(0,-1,0)},n.Down=function(){return new i(0,1,0)},n.Left=function(){return new i(-1,0,0)},n.Right=function(){return new i(1,0,0)},n.Forward=function(){return new i(0,0,1)},n.Backward=function(){return new i(0,0,-1)};var a=new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(a),o=new Uint32Array(a);e.fisqrt=function(t,e){var i=.5*t;e=e||1,r[0]=t,o[0]=1597463007-(o[0]>>1);for(var n=r[0];e--;)n*=1.5-i*n*n;return n},e.PseudoRandom=function(t){return(t=1e4*Math.sin(t.toFixed(4)))-Math.floor(t)}}(window),beablib=window.beablib||{},beablib.Maths=beablib.Maths||{},function(t){"use strict";var e=beablib.Maths,i=glMatrix.mat4,n=glMatrix.vec3,a=n.create(),r=function(){this.array=[1,0,0,0,1,0,0,0,1]};r.prototype={Set:function(t,e,i,n,a,r,o,s,u){var l=this.array;l[0]=t,l[1]=e,l[2]=i,l[3]=n,l[4]=a,l[5]=r,l[6]=o,l[7]=s,l[8]=u},SetIdentity:function(){var t=this.array;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}};var o=function(){this.Mat4=glMatrix.mat4.create()};o.prototype={Set:function(t,e,n,a,r,o,s,u,l,c,h,b,d,f,p,m){return i.set(this.Mat4,t,e,n,a,r,o,s,u,l,c,h,b,d,f,p,m)},SetIdentity:function(){return i.identity(this.Mat4)},SetOrthoProjection:function(t,e,n){var a=.5*n;return i.ortho(this.Mat4,0,t,e,0,a,-a)},Translate:function(t,e,r){return i.translate(this.Mat4,this.Mat4,n.set(a,t,e,r))}},o.Multiply=function(t,e,n){return i.multiply(n.Mat4,t.Mat4,e.Mat4)},o.RotationX=function(t,e){return i.fromXRotation(e.Mat4,t)},o.RotationY=function(t,e){return i.fromYRotation(e.Mat4,t)},o.RotationZ=function(t,e){return i.fromZRotation(e.Mat4,t)},o.Scaling=function(t,e,r,o){return i.fromScaling(o.Mat4,n.set(a,t,e,r))},o.Translation=function(t,e,r,o){return i.fromTranslation(o.Mat4,n.set(a,t,e,r))},e.Matrix3=r,e.Matrix4=o}(window),beablib=window.beablib||{},beablib.Game=beablib.Game||{},function(){"use strict";var t=0,e=0,i=0,n=0,a=function(){t=gsap.ticker.time,e=0},r=!1,o=!1,s=null,u=[],l=function(){n=t,t=gsap.ticker.time,e=.5*(e+(i=t-n));for(var a=0;a<u.length;a++)u[a]()};beablib.TweenHandler={AddTickFunction:function(t){u.push(t)},RemoveTickFunction:function(t){var e=u.indexOf(t);e>=0&&u.splice(e,1)},DoTick:function(){l()},Enable:function(t){r!==t&&(t?(gsap.ticker.add(l),a()):gsap.ticker.remove(l),r=t)},Pause:function(t){t?null===s&&(s=gsap.exportRoot({},!0)).pause(null,!1):null!==s&&(s.resume(),s=null,a()),o=t},CurrentTime:function(){return t},DeltaTime:function(){return e},FrameTime:function(){return i},SetFPS:function(t){gsap.ticker.setFPS(t)},IsPaused:function(){return o}}}(),beablib=window.beablib||{},function(){"use strict";var t=!1,e=0,i=[],n=function(){if(!beablib.TweenHandler.IsPaused()){for(e+=beablib.TweenHandler.FrameTime();e>=.01;){for(var t=0;t<i.length;t++)i[t].Process(.01);e-=.01}for(t=0;t<i.length;t++)i[t].Render()}};beablib.AddProcessable=function(e){t||(beablib.TweenHandler.AddTickFunction(n),t=!0),(void 0!==e.Process&&"function"==typeof e.Process||void 0!==e.prototype.Process&&"function"==typeof e.prototype.Process)&&(void 0!==e.Render&&"function"==typeof e.Render||void 0!==e.prototype.Render&&"function"==typeof e.prototype.Render)&&i.push(e)},beablib.RemoveProcessable=function(t){var e=i.indexOf(t);e>=0&&i.splice(e,1)}}(),beablib=window.beablib||{},beablib.Renderer=beablib.Renderer||{};var Vector2=beablib.Maths.Vector2,Matrix4=beablib.Maths.Matrix4;!function(){"use strict";var t=window.createjs||{},e=beablib.Renderer,i=!1,n=[];e.UpdateStages=function(){for(var t=0;t<n.length;t++)n[t].UpdateDirty()},e.UpdateStagesImmediate=function(){for(var t=0;t<n.length;t++)n[t].UpdateImmediate()},e.CreateStage=function(t,e){var a=new PIXI.Container,r=void 0!==e?e:{},o=null;if(void 0!==t&&null!==t&&""!==t){var s=document.getElementById(t),u=!r.height||r.height<0?beablib.MainView.Height:r.height,l=!r.width||r.width<0?beablib.MainView.Width:r.width,c=!r.transparent||r.transparent;(o=new PIXI.autoDetectRenderer(l,u,{view:s,transparent:c,resolution:beablib.DevicePixelRatio,roundPixels:!0})).View=new beablib.View(0,0),o.PIXIStage=function(){return a},o.update=function(){o.render(a)};var h=o.view.style;o.SetZIndex=function(t){h.zIndex=t},o.EnablePointerEvents=function(t){h.pointerEvents=t?"auto":"none"},o.Anchor={H:"centre",V:"centre"},o.PreferredSize={W:-1,H:-1},o.Flags={Clamp:!1},o.SetSize=function(t,e){t&&(void 0!==t.height&&(this.PreferredSize.H=t.height),void 0!==t.width&&(this.PreferredSize.W=t.width),void 0!=t.clamp&&(this.Flags.Clamp=t.clamp),this.RepositionEarly(beablib.MainView.ScaleFactor),this.SetDirty())},o.SetAnchors=function(t,e){t&&(void 0!==t.anchor_h&&(this.Anchor.H=t.anchor_h),void 0!==t.anchor_v&&(this.Anchor.V=t.anchor_v),this.RepositionEarly(beablib.MainView.ScaleFactor))};var b={left:0,top:0,centre:.5,right:1,bottom:1};o.RepositionEarly=function(t){var e=this.PreferredSize.H<0?beablib.MainView.Height:this.PreferredSize.H*t,i=this.PreferredSize.W<0?beablib.MainView.Width:this.PreferredSize.W*t;this.Flags.Clamp&&(e=Math.min(e,beablib.MainView.Height),i=Math.min(i,beablib.MainView.Width)),beablib.SetStageSize(this,i,e);var n=0,a=0,r=0;if(a="number"==typeof this.Anchor.H?beablib.MainView.HalfWidth+this.Anchor.H*t:void 0!==(n=b[this.Anchor.H])?beablib.MainView.Width*n-i*n:0,"number"==typeof this.Anchor.V)r=beablib.MainView.HalfHeight+this.Anchor.V*t;else{var o=Math.min(beablib.PageSize.Height*t,beablib.MainView.Height);r=void 0!==(n=b[this.Anchor.V])?beablib.MainView.HalfHeight-.5*o+(o*n-e*n):0}beablib.SetStagePosition(this,{X:a,Y:r}),this.SetDirty()},o.addChild=function(t){a.addChild.apply(a,arguments)},o.addChildAt=function(t){a.addChildAt.apply(a,arguments)},o.removeChild=function(t){a.removeChild.apply(a,arguments)},o.setChildIndex=function(t){a.setChildIndex.apply(a,arguments)},o.getChildIndex=function(t){return a.getChildIndex.apply(a,arguments)},o.getNumChildren=function(){return a.children.length},o.DirtyFlag=!1,o.SetDirty=function(){this.DirtyFlag=!0},o.ClearDirty=function(){this.DirtyFlag=!1},o.UpdateDirty=function(){this.DirtyFlag&&(this.update(),this.DirtyFlag=!1)},o.UpdateImmediate=function(){this.update(),this.DirtyFlag=!1},r&&(void 0!==r.touch&&(a.interactive=!0===r.touch),void 0!==r.autoclear&&(o.autoClear=r.autoclear)),n.push(o),i||(beablib.TweenHandler.AddTickFunction(beablib.UpdateStages),i=!0)}return beablib.AddRepositionable(o),o.RepositionEarly(beablib.MainView.ScaleFactor),o.SetSize(r),o.SetAnchors(r),o},e.DestroyStage=function(t){},e.SetStageSize=function(t,e,i){var n=0|e,a=0|i;t.View.Width===n&&t.View.Height===a||(t.View.Set(n,a),t.view.width=t.View.Width,t.view.height=t.View.Height,t.view.style.width=t.View.Width+"px",t.view.style.height=t.View.Height+"px",t.resize(t.View.Width,t.View.Height),t.ResizeCallback&&"function"==typeof t.ResizeCallback&&t.ResizeCallback(e,i))},e.SetStagePosition=function(t,e){var i=0|e.X,n=0|e.Y;t.View.Left===i&&t.View.Top===n||(t.View.SetTopLeft(n,i),t.view.style.marginLeft=i+"px",t.view.style.marginTop=n+"px")},e.EnableStageTouch=function(t,e){},e.CreateSpriteSheet=function(t){console.log('hey');if(void 0===t.images){if(void 0===t.spriteSheet)return null;t=t.spriteSheet}var e=null;if(t.images[0]instanceof PIXI.Texture?e=t.images[0].baseTexture:(t.images[0]instanceof HTMLImageElement||(t.images[0]=beablib.GetImageObjectByID(t.images[0])),e=new PIXI.BaseTexture(t.images[0])),null===e)return null;for(var i=t.animations,n=t.frames,a={_animations:[],_data:{},_frames:[],_images:[]},r=0;r<n.length;r++){var o=n[r];a._frames[r]=new PIXI.Texture(e,new PIXI.Rectangle(o[0],o[1],o[2],o[3])),a._frames[r].pivot={x:o[5]/o[2],y:o[6]/o[3]}}for(var s in i){var u={frames:[],name:s,next:s,speed:1},l=i[s];if(l.length>1){for(r=l[0];r<=l[1];r++)u.frames.push(r);u.next=!1===l[2]?null:l[2],u.speed=l[3]}else u.frames[0]=l[0];a._animations.push(s),a._data[s]=u}return a&&(a.framerate=60),a.getAnimation=function(t){return this._data[t]},a},e.CreateSprite=function(t,e,i){var n=new PIXI.Sprite;if(n){n.SetSpriteSheet=function(t){this.SpriteSheet=t},n.Paused=!0,n.AnimState={Data:null,Duration:1,CurrentAnim:null,CurrentFrame:-1,EndCallback:function(){},PlayType:0,Stage:null},n.SetAnimation=function(t,e){var i=this.SpriteSheet.getAnimation(t);i&&(this.AnimState.Data=i,this.AnimState.CurrentAnim=t,this.AnimState.CurrentFrame=0),this.AnimState.PlayType=e||0,this.SetFrame()},n.SetFrame=function(t){t=t||0;var e=this.AnimState,i=this.AnimState.Data;if(i){var n=!1,a=e.CurrentFrame,r=a+t*i.speed,o=i.frames.length;r>=o?(a=o-1,n=!0):a=r;var s=this.SpriteSheet._frames[i.frames[0|a]];this.texture=s,this.anchor.x=s.pivot.x,this.anchor.y=s.pivot.y,e.CurrentFrame=a,e.Stage&&e.Stage.SetDirty(),n&&(i.next?this.SetAnimation(i.next):this.Paused=!0,e.EndCallback())}},n.ParseAnimParams=function(t){var e=this.AnimState;e.EndCallback=t.callback?t.callback:function(){},e.EndCallback=t.onComplete?t.onComplete:function(){},e.Duration=t.duration?t.duration:1,e.Stage=t.stage?t.stage:null};n.once("added",function(){a.push(this)},n),n.once("removed",function(){r.push(this)},n),t&&n.SetSpriteSheet(t),e&&n.SetAnimation(e),void 0!==i&&n.SetProps(i)}return n},e.CreateContainer=function(t){var e=new PIXI.Container;if(void 0!==t&&(e.SetProps(t),void 0!==t.children))for(var i=0;i<t.children.length;i++)e.addChild(t.children[i]);return e},e.CreateText=function(t,e){var i=0,n=0,a=-1,r=void 0;if(void 0!==e)if(void 0!==e.pixiStyle)r=e.pixiStyle;else if(r=new PIXI.TextStyle,"string"==typeof e);else{if(e.colour&&(r.fill=e.colour),e.fontFamily&&(r.fontFamily=e.fontFamily),e.size&&(r.fontSize=e.size),e.letterSpacing&&(r.letterSpacing=e.letterSpacing),e.lineHeight&&(r.lineHeight=e.lineHeight),e.lineWidth&&(r.width=e.lineWidth),e.maxWidth&&(a=e.maxWidth),e.strokeColour&&(r.stroke=e.strokeColour),e.strokeWidth&&(r.strokeThickness=e.strokeWidth),e.textAlign){switch(e.textAlign){case"center":i=.5;break;case"right":i=1}r.align=e.textAlign}switch(void 0!==e.textBaseline?e.textBaseline:r.textBaseline){case"alphabetic":n=.8;break;case"top":case"hanging":n=0;break;case"middle":n=.5;break;case"ideographic":case"bottom":n=1}r.textBaseline="alphabetic"}var o=new PIXI.Text(t,r);return o.anchor.x=i,o.anchor.y=n,o.updateText(),void 0!==e&&o.SetProps(e),o.IL_MaxWidth=a,o.IL_MaxWidth>=0&&o.width>o.IL_MaxWidth&&(o.width=o.IL_MaxWidth),o.SetTextString=function(t){this.text=t,this.IL_MaxWidth>=0&&this.width>this.IL_MaxWidth&&(this.width=this.IL_MaxWidth),this.updateText()}.bind(o),o},e.Container=function(t){return e.CreateContainer(t)},e.Sprite=function(t,i,n){return e.CreateSprite(t,i,n)},e.Text=function(t,i){return e.CreateText(t,i)};var a=[],r=[];beablib.TweenHandler.AddTickFunction(function(){beablib.TweenHandler.DeltaTime();if(!beablib.TweenHandler.IsPaused()){for(var t=0;t<a.length;t++){var e=a[t];e.Paused||(e.AnimState,e.SetFrame(1))}for(t=0;t<r.length;t++){var i=a.indexOf(r[t]);i>=0&&a.splice(i,1)}r.length=0}}),void 0===PIXI.DisplayObject.prototype.SetPosition&&(PIXI.DisplayObject.prototype.SetPosition=function(t,e){t instanceof Vector2?(this.x=t.X,this.y=t.Y):void 0===e?(this.x=t.X,this.y=t.Y):(this.x=t,this.y=e)}),void 0===PIXI.DisplayObject.prototype.SetScale&&(PIXI.DisplayObject.prototype.SetScale=function(t,e){t instanceof Vector2?(this.scale.x=t.X,this.scale.y=t.Y):void 0!==e?(this.scale.x=t,this.scale.y=e):(this.scale.x=t,this.scale.y=t)},Object.defineProperty(PIXI.DisplayObject.prototype,"scaleX",{get:function(){return this.scale.x},set:function(t){this.scale.x=t}}),Object.defineProperty(PIXI.DisplayObject.prototype,"scaleY",{get:function(){return this.scale.y},set:function(t){this.scale.y=t}})),void 0===PIXI.DisplayObject.prototype.SetPivot&&(PIXI.DisplayObject.prototype.SetPivot=function(t){var e=this.getBounds();t instanceof Vector2?(this.pivot.x=t.X,this.pivot.y=t.Y):(void 0!==t.X&&(this.pivot.x=t.X),void 0!==t.Y&&(this.pivot.y=t.Y),void 0!==t.x&&(this.pivot.x=t.x),void 0!==t.y&&(this.pivot.y=t.y),void 0!==t.left&&!0===t.left&&(this.pivot.x=.5*-e.width),void 0!==t.top&&!0===t.top&&(this.pivot.y=.5*-e.height),void 0!==t.right&&!0===t.right&&(this.pivot.x=.5*e.width),void 0!==t.bottom&&!0===t.bottom&&(this.pivot.y=.5*e.height),void 0!==t.h_centre&&!0===t.h_centre&&(this.pivot.x=0),void 0!==t.v_centre&&!0===t.v_centre&&(this.pivot.y=0))}),void 0===PIXI.DisplayObject.prototype.SetInteractive&&(PIXI.DisplayObject.prototype.SetInteractive=function(t,e,i,n,a){if(this.interactive!==t)if(this.interactive=t,t){var r=function(t){return t.stopPropagation(),this.il_once&&(this.SetInteractive(!1),this.buttonMode=!1),"function"==typeof e&&e.apply(i,[t,a]),!1}.bind(this);this.il_once=n||!1,this.on("click",r),this.on("touchstart",r)}else this.removeAllListeners("click"),this.removeAllListeners("touchstart")}),void 0===PIXI.DisplayObject.prototype.SetButtonMode&&(PIXI.DisplayObject.prototype.SetButtonMode=function(t,e,i,n,a){this.buttonMode=t,this.SetInteractive(t,e,i,n,a)}),void 0===PIXI.Container.prototype.getNumChildren&&(PIXI.Container.prototype.getNumChildren=function(){return this.children.length}),void 0===PIXI.Container.prototype.removeAllChildren&&(PIXI.Container.prototype.removeAllChildren=function(){return this.removeChildren()}),void 0===PIXI.Container.prototype.cache&&(PIXI.Container.prototype.cache=function(){this.cacheAsBitmap=!0},PIXI.Container.prototype.updateCache=function(){this.cacheAsBitmap=!0},PIXI.Container.prototype.uncache=function(){this.cacheAsBitmap=!1}),void 0===PIXI.Sprite.prototype.gotoAndStop&&(PIXI.Sprite.prototype.gotoAndStop=function(t){this.SetAnimation(t),this.Paused=!0},PIXI.Sprite.prototype.gotoAndPlay=function(t,e){e&&this.ParseAnimParams(e),this.SetAnimation(t),this.Paused=!1},PIXI.Sprite.prototype.gotoAndPlayDuration=function(t,e){e&&this.ParseAnimParams(e),this.SetAnimation(t,1),this.Paused=!1},PIXI.Sprite.prototype.play=function(t){t&&this.ParseAnimParams(t),this.Paused=!1},PIXI.Sprite.prototype.stop=function(){this.Paused=!0}),void 0===PIXI.Text.prototype.clone&&(PIXI.Text.prototype.clone=function(){var t=this.style.clone();return new PIXI.Text(this.text,t)}),void 0===PIXI.Text.prototype.lineWidth&&Object.defineProperty(PIXI.Text.prototype,"lineWidth",{get:function(){return this.width},set:function(t){this.width=t}}),void 0===PIXI.Text.prototype.maxWidth&&Object.defineProperty(PIXI.Text.prototype,"maxWidth",{get:function(){return this.width},set:function(t){this.width=t}}),void 0===PIXI.DisplayObject.prototype.SetProps&&(PIXI.DisplayObject.prototype.SetProps=function(t){void 0!==t.position&&this.SetPosition(t.position),void 0!==t.pivot&&this.SetPivot(t.pivot),void 0!==t.alpha&&(this.alpha=t.alpha),void 0!==t.tint&&(this.tint=t.tint),void 0!==t.scale&&this.SetScale(t.scale),void 0!==t.scaleX&&(this.scaleX=t.scaleX),void 0!==t.scaleY&&(this.scaleY=t.scaleY),void 0!==t.rotation&&(this.rotation=t.rotation),void 0!==t.visible&&(this.visible=t.visible),void 0!==t.parent&&t.parent.addChild(this)}),beablib.CreateSpriteSheet=e.CreateSpriteSheet,beablib.CreateStage=e.CreateStage,beablib.UpdateStages=e.UpdateStages,beablib.UpdateStagesImmediate=e.UpdateStagesImmediate,beablib.SetStageSize=e.SetStageSize,beablib.SetStagePosition=e.SetStagePosition,t.Container=function(t){return e.Container(t)},t.Sprite=function(t,i,n){return e.CreateSprite(t,i,n)},t.Text=function(t,i,n){return e.CreateText(t,i,n)}}(),beablib=window.beablib||{},beablib.Utils=beablib.Utils||{},function(){"use strict";var t=function(e,i,n,a,r,o,s){createjs.EventDispatcher.initialize(t.prototype);var u=null,l=!1,c=16777215,h=!1,b=1,d=1;if(this.Stage=n,this.ParentContainer=null,this.Position=e,this.PositionType=2,this.ButtonScale=i,this.ButtonScalePressed=.98,this.SpriteSheet=a,this.IsToggle=!1,this.ToggleState=!1,this.Enabled=!0,this.PromptType="",this.PromptSequence=null,this.SoundEffect="",this.HideOnPressed=!1,void 0!==s){if(void 0!==s.Parent&&(this.ParentContainer=s.Parent),void 0!==s.PushFn&&(this.ButtonPressed=s.PushFn),void 0!==s.Pivot&&(u=s.Pivot),void 0!==s.Toggle&&(this.IsToggle=s.Toggle),void 0!==s.ToggleState&&(this.ToggleState=this.IsToggle?s.ToggleState:0),void 0!==s.PromptAnim&&(l=s.PromptAnim),void 0!==s.PromptGlow&&(h=s.PromptGlow),void 0!==s.PromptColour&&(c=s.PromptColour),void 0!==s.Sound&&(this.SoundEffect=s.Sound),void 0!==s.PositionType)switch(s.PositionType){case"fixed":this.PositionType=0;break;case"centered":this.PositionType=1}void 0!==s.Flip&&(void 0!==s.Flip.x&&(b=-b,null!==u&&(void 0!==u.left?(u.left=!1,u.right=!0):void 0!==u.right&&(u.left=!0,u.right=!1))),void 0!==s.Flip.y&&(d=-d,null!==u&&(void 0!==u.top?(u.top=!1,u.bottom=!0):void 0!==u.bottom&&(u.top=!0,u.bottom=!1)))),void 0!==s.HideOnPressed&&(this.HideOnPressed=s.HideOnPressed)}this.ButtonContainer=new createjs.Container;var f=new createjs.Sprite(a,r);null!==u&&f.SetPivot(u),f.SetScale(b,d),this.GetButtonSprite=function(){return f},this.ButtonContainer.addChild(f),null!==o&&""!==o?(this.ButtonDownSprite=new createjs.Sprite(a,o),null!==u&&this.ButtonDownSprite.SetPivot(u),this.ButtonDownSprite.SetScale(b,d),this.ButtonDownSprite.alpha=this.ToggleState,this.HideOnPressed?this.ButtonContainer.addChildAt(this.ButtonDownSprite,0):this.ButtonContainer.addChild(this.ButtonDownSprite)):this.ButtonDownSprite=null,this.Container=new createjs.Container,this.Container.alpha=0,this.Container.addChild(this.ButtonContainer),this.ParentContainer?(this.ParentContainer.addChild(this.Container),this.Container.SetPosition(this.Position),this.Container.SetScale(this.ButtonScale)):(this.Stage.addChild(this.Container),beablib.AddRepositionable(this)),l?this.PromptType="Anim":h&&(this.PromptType="Glow",void 0!==beablib.Utils.CGlow?(this.GlowSprite=new beablib.Utils.CGlow(f,{alpha:0,colour:c}),this.ButtonContainer.addChild(this.GlowSprite)):this.GlowSprite={alpha:0}),this.Init()};t.prototype.Init=function(){this.ParentContainer||this.Reposition()},t.prototype.Reposition=function(t){if(this.ParentContainer)this.Container.SetPosition(this.Position.X,this.Position.Y),this.Container.SetScale(this.ButtonScale);else{switch(this.PositionType){case 0:this.Container.SetPosition(this.Position.X*t,this.Position.Y*t);break;case 1:this.Container.SetPosition(this.Stage.View.HalfWidth+this.Position.X*t,this.Stage.View.HalfHeight+this.Position.Y*t);break;case 2:this.Container.SetPosition(this.Stage.View.Width*this.Position.X,this.Stage.View.Height*this.Position.Y)}this.Container.SetScale(this.ButtonScale*t)}this.Stage.SetDirty()},t.prototype.StartPrompt=function(){if(null===this.PromptSequence)switch(this.PromptType){case"Anim":this.PromptSequence=gsap.timeline({paused:!0,callbackScope:this,onUpdate:function(){this.Stage.SetDirty()},repeat:-1,repeatDelay:3}),this.PromptSequence.addCallback(function(){button_sprite.gotoAndPlay(normal_sprite)},"+=1"),this.PromptSequence.addCallback(function(){button_sprite.gotoAndPlay(normal_sprite)},"+=1"),this.PromptSequence.addCallback(function(){button_sprite.gotoAndPlay(normal_sprite)},"+=1");break;case"Glow":this.PromptSequence=gsap.timeline({paused:!0,callbackScope:this,onUpdate:function(){this.Stage.SetDirty()},repeat:-1,delay:1,repeatDelay:3}),this.PromptSequence.add(gsap.to(this.GlowSprite,.4,{alpha:1})),this.PromptSequence.add(gsap.to(this.GlowSprite,.4,{alpha:0})),this.PromptSequence.add(gsap.to(this.GlowSprite,.4,{alpha:1})),this.PromptSequence.add(gsap.to(this.GlowSprite,.4,{alpha:0})),this.PromptSequence.add(gsap.to(this.GlowSprite,.4,{alpha:1})),this.PromptSequence.add(gsap.to(this.GlowSprite,.4,{alpha:0}))}null!==this.PromptSequence&&this.PromptSequence.paused&&this.PromptSequence.restart(!0)},t.prototype.StopPrompt=function(){null===this.PromptSequence||this.PromptSequence.paused||(this.PromptSequence.pause(0),this.GlowSprite.alpha=0)},t.prototype.ButtonPressed=function(){},t.prototype.Enable=function(t){this.Enabled=t,this.Container.mouseEnabled=t,this.Container.cursor=t?"pointer":"default",this.Container.alpha&&(this.Container.alpha=t?1:.5,this.Stage.SetDirty())},t.prototype.Disable=function(){gsap.killTweensOf(this.Container),this.Container.cursor="default",this.Container.removeAllEventListeners("click")},t.prototype.Show=function(t){var e=function(){this.Stage.SetDirty()}.bind(this);gsap.killTweensOf(this.Container),this.Container.removeAllEventListeners("click");var i=t?this.Enabled?1:.5:0;gsap.to(this.Container,.5,{alpha:i,onUpdate:e}),t?(this.StartPrompt(),this.Container.on("click",function(t){t.stopImmediatePropagation(),""!==this.SoundEffect&&beablib.Audio.Play(this.SoundEffect),this.IsToggle&&(this.ToggleState=!this.ToggleState),this.ButtonContainer.SetScale(1),null!=this.ButtonDownSprite&&(this.ButtonDownSprite.alpha=this.IsToggle&&this.ToggleState?1:0),gsap.to(this.ButtonContainer,.1,{scaleX:this.ButtonScalePressed,scaleY:this.ButtonScalePressed,yoyo:!0,repeat:1,overwrite:!0,onUpdate:e}),this.IsToggle||null===this.ButtonDownSprite||(this.HideOnPressed?(this.ButtonDownSprite.alpha=1,this.GetButtonSprite().alpha=0,e(),gsap.delayedCall(.1,function(){this.ButtonDownSprite.alpha=0,this.GetButtonSprite().alpha=1},null,this)):gsap.to(this.ButtonDownSprite,.1,{alpha:1,yoyo:!0,repeat:1,overwrite:!0,onUpdate:e})),this.ButtonPressed()},this),beablib.IsMobile||(this.Container.cursor="pointer",this.Stage.enableMouseOver(10))):(this.StopPrompt(),gsap.killTweensOf(this.ButtonContainer),this.ButtonContainer.SetScale(1),null!=this.ButtonDownSprite&&(gsap.killTweensOf(this.ButtonDownSprite),this.ButtonDownSprite.alpha=this.IsToggle&&this.ToggleState?1:0),beablib.IsMobile||(this.Container.cursor="default"))},beablib.Utils.CButton=t}(),beablib=window.beablib||{},beablib.Renderer=beablib.Renderer||{},beablib.Utils=beablib.Utils||{},function(){"use strict";beablib.Renderer;var t=[],e=function(t,e,i,n){var a=0,r=0,o=-1,s={font:{name:t.font,size:e},align:void 0!==n.textAlign?n.textAlign:"left",tint:void 0!==n.colour?n.colour:16777215},u=new PIXI.extras.BitmapText(i,s);if(n.maxWidth&&(o=n.maxWidth),n.textAlign)switch(n.textAlign){case"center":a=.5;break;case"right":a=1}if(n.textBaseline)switch(n.textBaseline){case"alphabetic":r=.8;break;case"top":case"hanging":r=0;break;case"middle":r=.5;break;case"ideographic":case"bottom":r=1}return u.anchor.x=a,u.anchor.y=r,u.updateText(),u.SetProps(n),u.IL_MaxWidth=o,u.IL_MaxWidth>=0&&u.width>u.IL_MaxWidth&&(u.maxWidth=u.IL_MaxWidth),u.SetTextString=function(t){this.text=t,this.IL_MaxWidth>=0&&this.width>this.IL_MaxWidth&&(this.maxWidth=this.IL_MaxWidth),this.updateText()}.bind(u),u},i=function(t,e){this.FontDefinition=i.RegisterFont(t)};i.prototype.CalculateCursorPos=function(t,e,i,n){return{X:0,Y:0}},i.prototype.Print=function(t,i,n,a,r){var o={fontFamily:this.FontDefinition.FontFamily,colour:void 0!==r.colour?r.colour:16777215,size:this.FontDefinition.size,textAlign:void 0!==r.h?r.h:"left",textBaseline:void 0!==r.v?r.v:"alphabetic",position:i,scale:n},s=e(this.FontDefinition,this.FontDefinition.size,t,o);return a.addChild(s),s},i.RegisterFont=function(e){var i=beablib.GetXMLObject(e+".xml");if(i){var n=i.getElementsByTagName("info")[0],a=n.getAttribute("face"),r=parseInt(n.getAttribute("size"),10),o=i.getElementsByTagName("page")[0].getAttribute("file");if(null!==o){var s=beablib.GetImageObject(o);if(s){var u=PIXI.Texture.from(s.src);if(u){n.setAttribute("face",a+r);var l=PIXI.extras.BitmapText.registerFont(i,u),c=t[a];return void 0===c&&(c={},t[a]=c),l.FontFamily=a,c[r]=l,l}}}}return null},i.CreateText=function(i,n){if(void 0!==n&&void 0!==n.fontFamily){var a=t[n.fontFamily];if(void 0!==a){var r=null,o=1e4,s=void 0!==n.size?n.size:2;for(var u in a){a[u];var l=parseInt(u,10),c=Math.abs(l-s);if(0===c){r=a[u];break}c<o&&(o=c,r=a[u])}if(null!==r)return e(r,s,i,n)}}return null},beablib.Utils.CBitmapFont=i}(),beablib=window.beablib||{},beablib.Utils=beablib.Utils||{},function(){"use strict";beablib.Utils.CSequenceTrigger=function(t,e){var i=!1,n=function(){i=!1,e()};this.ClearTrigger=function(){i=!1},this.Trigger=function(){i=!0,beablib.DispatchEvent(t)},this.ReadyToExecute=function(){i?n():beablib.EventHandler.on(t,n,null,!0)}}}(),beablib=window.beablib||{},beablib.Renderer=beablib.Renderer||{},beablib.Utils=beablib.Utils||{},function(){"use strict";var t=beablib.Renderer,e=0,i=[],n=[],a={Process:function(t){for(var e=0;e<i.length;e++){i[e].Process(t)}for(e=0;e<n.length;e++){var a=i.indexOf(n[e]);a>=0&&i.splice(a,1)}n.length=0},Render:function(){for(var t=0;t<i.length;t++){i[t].Render()}}};beablib.AddProcessable(a);var r=function(t,e,i,n){createjs.EventDispatcher.initialize(r.prototype);var a=n&&void 0!==n.scale?n.scale:1;n&&void 0!==n.atlasUniqueID&&n.atlasUniqueID;PIXI.spine.Spine.globalAutoUpdate=!1;var o=new PIXI.BaseTexture(i),s=new PIXI.spine.core.TextureAtlas(t,function(t,e){e(o)}),u=new PIXI.spine.core.AtlasAttachmentLoader(s),l=new PIXI.spine.core.SkeletonJson(u);l.scale=a,this.SkeletonData=l.readSkeletonData(e),this.Atlas=s};r.prototype.CreateSpriteAssets=function(e,i){for(var n={images:[i],frames:[],animations:{}},a=0;a<e.regions.length;a++){var r=e.regions[a];n.frames.push([r.x,r.y,r.width,r.height,0,r.originalWidth/2-r.offsetX,r.originalHeight/2-(r.originalHeight-(r.offsetY+r.height))]),n.animations[r.name]=new Array([a])}"function"==typeof t.CreateSpriteSheet?e.SpriteSheet=t.CreateSpriteSheet(n):e.SpriteSheet=new createjs.SpriteSheet(n);for(a=0;a<e.regions.length;a++){(r=e.regions[a]).texture=e.SpriteSheet._frames[a]}this.GetSpriteSheet=function(){return this.Atlas.SpriteSheet}},r.prototype.CreateAnimInstance_new=function(t,a){var r=this.SkeletonData,o=new pixi_spine.Spine(r),s=o.skeleton;s.ID=e++;o.stateData;var u=o.state;u.anim_paused=!0,u.onEvent=function(t,e){l.dispatchEvent(e.data.name)};var l=o,c=t,h=!1;l.SetProps(a),l.gotoAndPlay=function(t,e){var i=null,n=!1,a=1;r.findAnimation(t)&&(void 0!==e&&(i=e.callback?e.callback:i,i=e.onComplete?e.onComplete:i,n=e.Loop?e.Loop:n,n=e.loop?e.loop:n,a=e.Speed?e.Speed:a,a=e.timeScale?e.timeScale:a),s.setToSetupPose(),u.setAnimation(0,t,n),u.anim_paused=!1,u.timeScale=a,u.onComplete=function(){l.emit("animationend"),n||(u.anim_paused=!0),null!==i&&i()},l.Process(0))}.bind(this),l.HasAnimation=function(t){return null!=r.findAnimation(t)},l.SetSkin=function(t){s.setSkinByName(t)},l.SetStage=function(t){c=t},l.GetSpriteRef=function(t){return slot_sprite_refs[t]},l.Process=function(t){u.anim_paused||(o.update(t),h=!0)},l.Render=function(){h&&(c.SetDirty(),h=!1)};return l.once("added",function(){i.push(l)},l),l.once("removed",function(){n.push(l)},l),l},r.prototype.CreateAnimInstance=function(a,r){var o=this.SkeletonData,s=new spine.Skeleton(o);if(!s)return null;s.updateWorldTransform(),s.ID=e++;var u=new spine.AnimationStateData(o),l=new spine.AnimationState(u);l.anim_paused=!0,l.onEvent=function(t,e){h.dispatchEvent(e.data.name)};for(var c=s.drawOrder,h=t.CreateContainer(r),b=[],d=[],f=[],p=this.Atlas.SpriteSheet,m=a,v=!1,w=0;w<c.length;w++)b[w]=t.CreateContainer({visible:!1}),h.addChild(b[w]);var g=function(e){for(var i=void 0===e||!e,n=0;n<c.length;n++){var a=c[n],r=a.a,o=a.attachment,s=a.bone,u=255*a.r<<16|255*a.g<<8|255*a.b;if(o){if(o.rendererObject){var l=o.rendererObject.name,h=d[n];h?h.gotoAndStop(l):(h=t.CreateSprite(p,l),b[n].addChild(h),d[n]=h,f[o.name]=h),b[n].visible=!0}var m=b[n],v=d[n];m&&v&&(m.visible=i,m.x=s.worldX+o.x*s.m00+o.y*s.m01,m.y=s.worldY+o.x*s.m10+o.y*s.m11,m.scaleX=s.worldScaleX,m.scaleY=s.worldScaleY,m.rotation=.017453*-s.worldRotation,m.alpha=r,v.tint=u,s.worldFlipX&&(m.scaleX=-m.scaleX,m.rotation=.017453*-m.rotation),s.worldFlipY===spine.Bone.yDown&&(m.scaleY=-m.scaleY,m.rotation=.017453*-m.rotation),v.gotoAndStop(o.name),v.rotation=-.017453*o.rotation)}else b[n].visible=!1}}.bind(this);g(!0),h.gotoAndStop=function(t){var e=o.findAnimation(t);s.setToSetupPose(),l.setAnimation(0,e,!1),l.update(0),l.apply(s),s.updateWorldTransform(),v=!0}.bind(this),h.blendAndPlay=function(t,e){}.bind(this),h.gotoAndPlay=function(t,e){var i=o.findAnimation(t),n=null,a=!1,r=1;i&&(void 0!==e&&(n=e.callback?e.callback:n,n=e.onComplete?e.onComplete:n,a=e.Loop?e.Loop:a,a=e.loop?e.loop:a,r=e.Speed?e.Speed:r,r=e.timeScale?e.timeScale:r),s.setToSetupPose(),l.setAnimation(0,i,a),l.anim_paused=!1,l.timeScale=r,l.onComplete=function(){h.emit("animationend"),a||(l.anim_paused=!0),null!==n&&n()},h.Process(0))}.bind(this),h.HasAnimation=function(t){return null!=o.findAnimation(t)},h.SetSkin=function(t){s.setSkinByName(t)},h.SetStage=function(t){m=t},h.GetSpriteRef=function(t){return f[t]},h.Process=function(t){l.anim_paused||(l.update(t),l.apply(s),s.updateWorldTransform(),v=!0)},h.Render=function(){v&&(g(),m.SetDirty(),v=!1)};return h.once("added",function(){i.push(h)},h),h.once("removed",function(){n.push(h)},h),h},beablib.Utils.CSpineAnim=r}(),beablib=window.beablib||{},beablib.Game=beablib.Game||{},function(){"use strict";beablib.Game.Events={Config:"BLGameCore:Config",Initialised:"BLGameCore:Initialised",SetTitleMode:"BLGameCore:SetTitleMode",PrepareGame:"BLGameCore:PrepareGame",PrepareAutoplay:"BLGameCore:PrepareAutoplay",ReadyToStart:"BLGameCore:ReadyToStart",ContinueAutoplay:"BLGameCore:ContinueAutoplay",StartGame:"BLGameCore:StartGame",RestoreGame:"BLGameCore:RestoreGame",TurnTaken:"BLGameCore:TurnTaken",TurnsComplete:"BLGameCore:TurnsComplete",SetupPrizeTable:"BLGameCore:SetupPrizeTable",CancelledAutoplays:"BLGameCore:CancelledAutoplays",UpdateAudio:"BLGameCore:UpdateAudio",UpdateAutoplays:"BLGameCore:UpdateAutoplays",UpdateBalance:"BLGameCore:UpdateBalance",UpdateStake:"BLGameCore:UpdateStake",UpdateState:"BLGameCore:UpdateState",UpdateTurns:"BLGameCore:UpdateTurns",UpdateWinnings:"BLGameCore:UpdateWinnings",Winner:"BLGameCore:Winner",HideAbout:"BLGameCore:HideAbout",HideAutoplay:"BLGameCore:HideAutoplay",HideHelp:"BLGameCore:HideHelp",HideSettings:"BLGameCore:HideSettings",HidePayTable:"BLGameCore:HidePayTable",ShowAbout:"BLGameCore:ShowAbout",ShowAutoplay:"BLGameCore:ShowAutoplay",ShowHelp:"BLGameCore:ShowHelp",ShowSettings:"BLGameCore:ShowSettings",ShowPayTable:"BLGameCore:ShowPayTable",EndGame:"BLGameCore:EndGame",Error:"BLGameCore:Error"}}(),beablib=window.beablib||{},beablib.Renderer=beablib.Renderer||{},function(){"use strict";var t=window.com.camelot,e=(t.core,t.iwg,beablib.Renderer),i=null,n=null;e.SetPauseIcon=function(t){null!==n&&(null!==i&&n.removeChild(i),n.addChild(t)),i=t},e.GetPauseOverlay=function(){return null===n&&function(){var t=new PIXI.Graphics;if(t.Update=function(e){t.clear(),t.beginFill(0,1),t.drawRect(-beablib.MainView.HalfWidth/e,-beablib.MainView.HalfHeight/e,beablib.MainView.Width/e,beablib.MainView.Height/e),t.endFill(),t.alpha=.75},null===i){var e=new PIXI.Graphics;e.beginFill(16777215,1),e.drawCircle(128,128,80),e.endFill(),e.beginFill(0,1),e.drawRoundedRect(98,88,20,80,4),e.drawRoundedRect(138,88,20,80,4),e.endFill(),e.pivot.set(128,128),i=e}(n=new PIXI.Container).addChild(t,i),n.Reposition=function(e,i){t.Update(i),n.SetPosition(e.View.HalfWidth,e.View.HalfHeight),n.SetScale(i)},n.WaitToUnPause=function(t){n.SetInteractive(!0,t,null,!0)}}(),n}}(),beablib=window.beablib||{},beablib.Audio=beablib.Audio||{},beablib.Core=beablib.Core||{},beablib.FontsLoader=beablib.FontsLoader||{},beablib.Game=beablib.Game||{},beablib.Renderer=beablib.Renderer||{},function(){"use strict";var t=window.com.camelot,e=t.core,i=t.iwg,n=beablib.Core,a=beablib.FontsLoader,r=(beablib.Game,beablib.Renderer);beablib.GamePath="",beablib.AudioSpritePath="",beablib.SpriteSheetPath=i.imports.js,beablib.IsMobile=!1,beablib.PauseEnabled=!0,beablib.AutoPause=!0,beablib.ResizeEnabled=!1;console.log;beablib.log=function(t){},beablib.ParentCanvasID="IWGholder",beablib.GetBaseCanvasName=function(){return"IWGcanvas"},beablib.GetAtlasPath=function(t){return beablib.GamePath+"src/imports/atlas/"+t},beablib.GetAtlasObject=function(t){return e.iwgLoadQ.getResult(beablib.GamePath+"src/imports/atlas/"+t)},beablib.GetAtlasObjectByID=function(t){return e.iwgLoadQ.getResult(t)},beablib.GetFontPath=function(t){return beablib.GamePath+"src/imports/font/"+t},beablib.GetJSONPath=function(t){return beablib.GamePath+"src/imports/json/"+t},beablib.GetJSONObject=function(t){return e.iwgLoadQ.getResult(beablib.GamePath+"src/imports/json/"+t)},beablib.GetJSONObjectByID=function(t){return e.iwgLoadQ.getResult(t)},beablib.GetImage=function(t){return t},beablib.GetImageObject=function(t){return e.iwgLoadQ.getResult(beablib.GamePath+"src/imports/img/"+t)},beablib.GetImageObjectByID=function(t){return e.iwgLoadQ.images[t]},beablib.GetXMLPath=function(t){return beablib.GamePath+"src/imports/xml/"+t},beablib.GetXMLObject=function(t){return e.iwgLoadQ.getResult(beablib.GamePath+"src/imports/xml/"+t)},beablib.GetXMLObjectByID=function(t){return e.iwgLoadQ.getResult(t)},beablib.GetLocalisedString=function(t){return t},beablib.FormatCurrencyString=function(t){return t},beablib.CreatePrizeTable=function(t){o.CurrentCard.PrizeTable=[]},beablib.CalcPseudoSeed=function(t){beablib.PseudoSeed=0},beablib.ShowSettingsMenu=function(){},beablib.PrepareGame=function(){},beablib.RevealCell=function(t){},beablib.AutoReveal=function(){};var o=beablib.Game,s=function(){beablib.log("Initialising Beablib_Core_Camelot"),beablib.IsMobile=!com.camelot.core.IWG.ame("get","IS_DESKTOP"),n.ParseBrowser();var t=function(){document.getElementsByName("html5-frame").length&&document.getElementsByName("html5-frame")[0].contentWindow.document.body.focus()};t();var i=!0,a=function(t,n){if(i){if(beablib.MainView.Set(t,n),e.IWG.ame("get","IS_DESKTOP")){var a=document.getElementById("IWGholder");null!=a&&(a.style.width=t+"px",a.style.height=n+"px")}beablib.RepositionAll()}};if(void 0!==window.devicePixelRatio)beablib.DevicePixelRatio=window.devicePixelRatio;else{var s=window.screen;beablib.DevicePixelRatio=void 0!==s&&void 0!==s.systemXDPI&&void 0!==s.logicalXDPI&&s.systemXDPI>s.logicalXDPI?s.systemXDPI/s.logicalXDPI:1}a(960,640),com.camelot.iwg.IWGEM.on(com.camelot.core.IWGEVENT.RESIZE,function(i){a(parseInt(e.IWG.ame("get",{vars:["gameWidth"]})),parseInt(e.IWG.ame("get",{vars:["gameHeight"]}))),t()}),com.camelot.iwg.IWGEM.on(com.camelot.core.IWGEVENT.FULLSCREEN,function(i){var n=e.IWG.ame("get","IS_DESKTOP"),r=n?window.innerHeight:e.IWG.ame("get",{vars:["gameHeight"]}),o=n?window.innerWidth:e.IWG.ame("get",{vars:["gameWidth"]});a(o,r),t()});var u=null,l=null,c=null,h=null,b=!1;beablib.SetPauseIcon=function(t){r.SetPauseIcon(t)},com.camelot.iwg.IWGEM.on(com.camelot.core.IWGEVENT.PAUSE,function(e){if(beablib.PauseEnabled){if(!0===e&&!0!==b){b=!0;var i=beablib.TweenHandler.IsPaused();beablib.TweenHandler.Pause(!0);var n=createjs.Sound.muted;createjs.Sound.muted=!0;var a=o.DetectInput;o.DetectInput=!1,c=r.GetPauseOverlay(),null==l&&(u=beablib.CreateCanvas({id:"BeablibPauseCanvas",zIndex:5e3,position:"fixed",AddToParent:!0}),l=beablib.CreateStage("BeablibPauseCanvas",beablib.MainView.Width,beablib.MainView.Height)),null==h&&(h={Reposition:function(){"function"==typeof c.Reposition&&c.Reposition(l,beablib.MainView.ScaleFactor)}},beablib.SetRepositionable(h)),u.EnablePointerEvents(!0),u.Show(!0),l.addChild(c),l.SetDirty(),c.WaitToUnPause(function(){l.removeChild(c),l.SetDirty(),createjs.Sound.muted=n,u.EnablePointerEvents(!1),u.Show(!1),beablib.TweenHandler.Pause(i),o.DetectInput=a,b=!1,beablib.UpdateStagesImmediate(),t()})}}else beablib.AutoPause&&beablib.TweenHandler.Pause(e)}),"function"==typeof o.Init&&o.Init(),a(parseInt(e.IWG.ame("get",{vars:["gameWidth"]})),parseInt(e.IWG.ame("get",{vars:["gameHeight"]}))),i=beablib.ResizeEnabled};i._class("core.IWGInit",function(){beablib.GamePath=com.camelot.core.IWG.ame("get",{vars:["params"]}).gamePath,n.ImportsRoot=beablib.GamePath+"src/imports/";a.Load(o.FontDefinitions,0,function(){if(s(),e.IWG.ame("killLoader"),"function"==typeof o.Launch){var t=!1,i=function(){t||(t=!0,o.Launch())};com.camelot.iwg.IWGEM.on(com.camelot.core.IWGEVENT.FULLSCREEN,i),gsap.delayedCall(1,i)}})})}();